{"version":3,"sources":["webpack/universalModuleDefinition","webpack/bootstrap","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\core\\src\\common\\annotation\\autowired.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\core\\src\\common\\annotation\\component.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\core\\src\\common\\annotation\\constant.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\core\\src\\common\\annotation\\index.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\core\\src\\common\\annotation\\optional.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\core\\src\\common\\annotation\\value.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\core\\src\\common\\aop\\aop-protocol.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\core\\src\\common\\aop\\index.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\core\\src\\common\\aop\\method-advice.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\core\\src\\common\\application\\application-error.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\core\\src\\common\\application\\application-protocol.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\core\\src\\common\\application\\index.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\core\\src\\common\\config\\config-protocol.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\core\\src\\common\\config\\config-provider.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\core\\src\\common\\config\\index.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\core\\src\\common\\constants.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\core\\src\\common\\container\\auto-bind.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\core\\src\\common\\container\\container-provider.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\core\\src\\common\\container\\dynamic-container.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\core\\src\\common\\container\\index.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\core\\src\\common\\error\\cutom-error.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\core\\src\\common\\error\\index.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\core\\src\\common\\error\\validation-errors.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\core\\src\\common\\index.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\core\\src\\common\\logger\\console-logger.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\core\\src\\common\\logger\\index.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\core\\src\\common\\logger\\logger-protocol.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\core\\src\\common\\pipe\\index.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\core\\src\\common\\pipe\\pipe-manager.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\core\\src\\common\\pipe\\pipe-protocol.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\core\\src\\common\\pipe\\pipe-provider.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\core\\src\\common\\pipe\\pipe-transtorm.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\core\\src\\common\\utils\\class-util.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\core\\src\\common\\utils\\disposable.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\core\\src\\common\\utils\\index.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\core\\src\\common\\utils\\metadata-util.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\core\\src\\common\\utils\\os.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\core\\src\\common\\utils\\prioritizeable.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\core\\src\\common\\utils\\promise-util.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\core\\src\\common\\utils\\proxy-util.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\core\\src\\node\\application\\backend-application-state.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\core\\src\\node\\application\\backend-application.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\core\\src\\node\\application\\index.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\core\\src\\node\\index.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\core\\src\\node\\module.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\fc-adapter\\src\\node\\context.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\fc-adapter\\src\\node\\http-application-entry.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\fc-adapter\\src\\node\\module.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\mvc\\src\\common\\constants.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\mvc\\src\\common\\index.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\mvc\\src\\node\\annotation\\body.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\mvc\\src\\node\\annotation\\catch.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\mvc\\src\\node\\annotation\\controller.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\mvc\\src\\node\\annotation\\cookie.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\mvc\\src\\node\\annotation\\header.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\mvc\\src\\node\\annotation\\index.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\mvc\\src\\node\\annotation\\method.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\mvc\\src\\node\\annotation\\param.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\mvc\\src\\node\\annotation\\query.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\mvc\\src\\node\\annotation\\session.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\mvc\\src\\node\\annotation\\view.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\mvc\\src\\node\\constants.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\mvc\\src\\node\\handler\\handler-adapter.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\mvc\\src\\node\\handler\\handler-protocol.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\mvc\\src\\node\\handler\\index.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\mvc\\src\\node\\handler\\route-builder.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\mvc\\src\\node\\handler\\route-metadata-matcher.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\mvc\\src\\node\\handler\\route-provider.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\mvc\\src\\node\\index.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\mvc\\src\\node\\module.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\mvc\\src\\node\\resolver\\index.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\mvc\\src\\node\\resolver\\method-args-resolver-provider.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\mvc\\src\\node\\resolver\\method-args-resolver.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\mvc\\src\\node\\resolver\\resolver-protocol.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\mvc\\src\\node\\resolver\\response-resolver-provider.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\mvc\\src\\node\\resolver\\response-resolver.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\mvc\\src\\node\\resolver\\view-resolver-provider.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\mvc\\src\\node\\resolver\\view-resolver.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\mvc\\src\\node\\view\\html-view.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\mvc\\src\\node\\view\\index.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\mvc\\src\\node\\view\\json-view.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\mvc\\src\\node\\view\\text-view.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\mvc\\src\\node\\view\\view-protocol.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\mvc\\src\\node\\view\\view-provider.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\web\\src\\common\\constants.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\web\\src\\common\\index.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\web\\src\\common\\resolver\\index.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\web\\src\\common\\resolver\\path-resolver.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\web\\src\\common\\resolver\\resolver-protocol.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\web\\src\\node\\context.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\web\\src\\node\\cookies\\cookies-factory.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\web\\src\\node\\cookies\\cookies-middleware.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\web\\src\\node\\cookies\\cookies-protocol.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\web\\src\\node\\cookies\\index.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\web\\src\\node\\cors\\cors-middleware.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\web\\src\\node\\cors\\cors-protocol.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\web\\src\\node\\cors\\index.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\web\\src\\node\\dispatcher\\dispatcher-protocol.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\web\\src\\node\\dispatcher\\dispatcher.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\web\\src\\node\\dispatcher\\index.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\web\\src\\node\\error\\error-hander-provider.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\web\\src\\node\\error\\error-protocol.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\web\\src\\node\\error\\http-error.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\web\\src\\node\\error\\index.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\web\\src\\node\\error\\not-found-error.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\web\\src\\node\\handler\\handler-execution-chain.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\web\\src\\node\\handler\\handler-mapping.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\web\\src\\node\\handler\\handler-protocol.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\web\\src\\node\\handler\\index.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\web\\src\\node\\http\\http-middleware.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\web\\src\\node\\http\\http-protocol.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\web\\src\\node\\http\\index.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\web\\src\\node\\index.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\web\\src\\node\\matcher\\index.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\web\\src\\node\\matcher\\matcher-protocol.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\web\\src\\node\\matcher\\request-matcher.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\web\\src\\node\\middleware\\compose.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\web\\src\\node\\middleware\\index.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\web\\src\\node\\middleware\\middleware-provider.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\web\\src\\node\\module.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\web\\src\\node\\session\\index.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\web\\src\\node\\session\\session-manager.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\web\\src\\node\\session\\session-middleware.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\web\\src\\node\\session\\session-protocol.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\web\\src\\node\\session\\session-store.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\web\\src\\node\\session\\session-strategy.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\web\\src\\node\\session\\session.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\web\\src\\node\\trace\\index.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\web\\src\\node\\trace\\trace-id-resolver.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\web\\src\\node\\trace\\trace-middleware.ts","F:\\ProjectDemo\\backend-app\\node_modules\\@malagu\\web\\src\\node\\trace\\trace-protocol.ts","F:\\ProjectDemo\\backend-app\\src\\home-controller.ts","F:\\ProjectDemo\\backend-app\\src\\module.ts","F:\\ProjectDemo\\backend-app\\src\\user-controller.ts","external \"class-transformer\"","external \"class-validator\"","external \"cookies\"","external \"cors\"","external \"crc\"","external \"express-http-context\"","external \"fs-extra\"","external \"inversify\"","external \"inversify-binding-decorators\"","external \"jexl\"","external \"loglevel\"","external \"mustache\"","external \"path\"","external \"raw-body\"","external \"reflect-metadata\"","external \"source-map-support\"","external \"ts-custom-error\"","external \"url-join\"","external \"url-pattern\"","external \"util\"","external \"uuid\"","external \"uuid/v4\"","external \"vscode-jsonrpc\"","external \"vscode-jsonrpc/lib/events\""],"names":[],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(global, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 0);\n","import { inject, interfaces, multiInject, Container } from 'inversify';\nimport { ServiceIdentifierOrFunc } from 'inversify/dts/annotation/inject';\nimport { ContainerProvider } from '../container';\n\nexport interface AutowiredOption {\n    id?: ServiceIdentifierOrFunc,\n    detached?: boolean\n}\nexport namespace AutowiredOption {\n    export function is(options: any): options is AutowiredOption {\n        return options && (options.id !== undefined || options.detached !== undefined);\n    }\n}\n\nexport interface AutowiredDecorator {\n    (option?: ServiceIdentifierOrFunc | AutowiredOption): (target: any, targetKey: string, index?: number) => any;\n    (target: any, targetKey: string, index?: number): any;\n}\n\nexport const Autowired = <AutowiredDecorator>function (target: any, targetKey: string, index?: number) {\n    const option = getAutowiredOption(target, targetKey, index);\n    if (targetKey === undefined && index === undefined) {\n        return (t: any, tk: string, i?: number) => {\n            applyAutowiredDecorator(option, t, tk, i);\n        };\n\n    } else {\n        applyAutowiredDecorator(option, target, targetKey, index);\n    }\n};\n\nexport function getAutowiredOption(target: any, targetKey: string, index?: number) {\n    let option: AutowiredOption = {};\n    if (targetKey === undefined) {\n        if (AutowiredOption.is(target)) {\n            option = { ...target };\n        } else if (target) {\n            option = { id: target };\n        }\n    }\n    return option;\n}\n\nexport function applyAutowiredDecorator(option: AutowiredOption, target: any, targetKey: string, index?: number,\n    doInject = (id: ServiceIdentifierOrFunc, isMulti: boolean, t: any, k: string, i?: number) => {\n        if (isMulti) {\n            multiInject(<interfaces.ServiceIdentifier<any>>id)(t, k, i);\n        } else {\n            inject(id)(target, targetKey, index);\n        }\n    },\n    doGetValue = (id: interfaces.ServiceIdentifier<any>, isMulti: boolean, container: Container, t: any, property: string) => {\n        if (isMulti) {\n            return container.getAll(id);\n        } else {\n            return container.get(id);\n        }\n    }): void {\n    let type: any;\n    if (index !== undefined)  {\n        type = Reflect.getMetadata('design:paramtypes', target, targetKey)[index];\n\n    } else {\n        type = Reflect.getMetadata('design:type', target, targetKey);\n    }\n    const isMlt = type === Array;\n    const defaultAutowiredOption: AutowiredOption = {\n        id: type,\n        detached: false\n    };\n\n    const opt = { ...defaultAutowiredOption, ...option };\n\n    if (opt.detached) {\n        if (index !== undefined) {\n            throw new Error(`The ${target.constructor.name} itself is not injected into the container, so the parameter injection of the constructor is not supported.`);\n        }\n        createAutowiredProperty(opt, isMlt, doGetValue, target, targetKey);\n        return;\n    } else {\n        doInject( <ServiceIdentifierOrFunc>opt.id, isMlt, target, targetKey, index);\n\n    }\n}\n\nexport function createAutowiredProperty(option: AutowiredOption, isMulti: boolean,\n    doGetValue: (id: interfaces.ServiceIdentifier<any>, isMulti: boolean, container: Container, target: any, property: string) => any,\n    target: any, property: string) {\n    let value: any;\n    Object.defineProperty(target, property, {\n        enumerable: true,\n        get() {\n            if (value !== undefined) {\n                return value;\n            }\n            const container = ContainerProvider.provide();\n            const id = <interfaces.ServiceIdentifier<any>>option.id;\n            value = doGetValue(id, isMulti, container, target, property);\n\n            return value;\n        }\n    });\n}\n","import { fluentProvide } from 'inversify-binding-decorators';\nimport { interfaces } from 'inversify';\nimport { METADATA_KEY } from '../constants';\nimport { MethodBeforeAdvice, AfterReturningAdvice, AfterThrowsAdvice } from '../aop/aop-protocol';\n\nexport enum Scope {\n    Request, Singleton, Transient\n}\nexport interface ComponentOption {\n    id?: interfaces.ServiceIdentifier<any> | interfaces.ServiceIdentifier<any>[];\n    scope?: Scope;\n    rebind?: boolean;\n    proxy?: boolean;\n}\nexport namespace ComponentOption {\n    export function is(options: any): options is ComponentOption {\n        return options && (options.id !== undefined || options.scope !== undefined ||\n            options.rebind !== undefined || options.proxy !== undefined);\n    }\n}\n\nexport interface ComponentDecorator {\n    (option?: interfaces.ServiceIdentifier<any> | interfaces.ServiceIdentifier<any>[] | ComponentOption): (target: any) => any;\n}\n\nexport const Component =\n    <ComponentDecorator>function (idOrOption?: interfaces.ServiceIdentifier<any> | interfaces.ServiceIdentifier<any>[] | ComponentOption): (target: any) => any {\n        const option = getComponentOption(idOrOption);\n        return (t: any) => {\n            applyComponentDecorator(option, t);\n        };\n    };\n\nexport function getComponentOption(idOrOption?: interfaces.ServiceIdentifier<any> | interfaces.ServiceIdentifier<any>[] | ComponentOption) {\n    let option: ComponentOption = {};\n\n    if (ComponentOption.is(idOrOption)) {\n        option = { ...idOrOption };\n    } else if (idOrOption) {\n        option = { id: idOrOption };\n    }\n    return option;\n}\n\nfunction doProxy (context: interfaces.Context, t: any) {\n    const proxy = new Proxy(t, {\n        get: (target, method, receiver) => {\n            const func = target[method];\n            if (typeof func === 'function') {\n                return async (...args: any[]) => {\n                    try {\n                        const beforeAdvices = context.container.getAll<MethodBeforeAdvice>(MethodBeforeAdvice) || [];\n                        for (const advice of beforeAdvices) {\n                            await advice.before(method, args, t);\n                        }\n                        const returnValue = await func.apply(target, args);\n                        const afterReturningAdvices = context.container.getAll<AfterReturningAdvice>(AfterReturningAdvice) || [];\n                        for (const advice of afterReturningAdvices) {\n                            await advice.afterReturning(returnValue, method, args, t);\n                        }\n                        return returnValue;\n                    } catch (error) {\n                        const afterThrowsAdvices = context.container.getAll<AfterThrowsAdvice>(AfterThrowsAdvice) || [];\n                        for (const advice of afterThrowsAdvices) {\n                            await advice.afterThrows(error, method, args, t);\n                        }\n                        throw error;\n                    }\n                };\n            }\n            return func;\n        }\n    });\n    proxy.target = t;\n    t.proxyTarget = proxy;\n    return proxy;\n}\n\nexport function applyComponentDecorator(option: ComponentOption, target: any): void {\n    const defaultComponentOption: ComponentOption = {\n        id: target,\n        scope: Scope.Singleton,\n        rebind: false,\n        proxy: false\n    };\n    const opt = { ...defaultComponentOption, ...option };\n    const ids = Array.isArray(opt.id) ? opt.id : opt.id !== target ? [ opt.id, target ] : [ opt.id ] ;\n    const id = <interfaces.ServiceIdentifier<any>>ids[0];\n    const p = fluentProvide(id);\n    let whenOn: any;\n    if (opt.scope === Scope.Singleton) {\n        whenOn = p.inSingletonScope();\n    } else if (opt.scope === Scope.Transient) {\n        whenOn = p.inTransientScope();\n    }\n    if (opt.proxy) {\n        whenOn.onActivation(doProxy).done(true)(target);\n    } else {\n        whenOn.done(true)(target);\n    }\n    ids.shift();\n    if (ids.length > 0) {\n        (Reflect as any).defineMetadata(\n            METADATA_KEY.toService,\n            id,\n            target\n        );\n    }\n    for (const sevice of ids) {\n        fluentProvide(<interfaces.ServiceIdentifier<any>>sevice).done(true)(target);\n    }\n    if (opt.rebind) {\n        const metadata = true;\n        Reflect.defineMetadata(\n            METADATA_KEY.rebind,\n            metadata,\n            target\n        );\n    }\n}\n","import { interfaces } from 'inversify';\nimport { METADATA_KEY } from '../constants';\n\nexport interface ConstantOption {\n    id?: interfaces.ServiceIdentifier<any> | interfaces.ServiceIdentifier<any>[];\n    rebind?: boolean;\n    constantValue?: boolean;\n}\n\nexport interface ConstantDecorator {\n    (id: interfaces.ServiceIdentifier<any> | interfaces.ServiceIdentifier<any>[], constantValue: any, rebind?: boolean): (target: any) => any;\n}\n\nexport const Constant =\n    <ConstantDecorator>function (id: interfaces.ServiceIdentifier<any> | interfaces.ServiceIdentifier<any>[], constantValue: any, rebind: boolean = false): (target: any) => any {\n        return (t: any) => {\n            applyConstantDecorator({ id, constantValue, rebind }, t);\n        };\n    };\n\nexport function applyConstantDecorator(option: ConstantOption, target: any): void {\n    const previousMetadata = Reflect.getMetadata(METADATA_KEY.constantValue, Reflect) || [];\n    const newMetadata = [option].concat(previousMetadata);\n    Reflect.defineMetadata(METADATA_KEY.constantValue, newMetadata, Reflect);\n}\n","export * from './autowired';\nexport * from './component';\nexport * from './value';\nexport * from './optional';\nexport * from './constant';\n","import { optional } from 'inversify';\n\nexport interface OptionalDecorator {\n    (): (target: any, targetKey: string, index?: number) => any;\n    (target: any, targetKey: string, index?: number): any;\n}\n\nexport const Optional = <OptionalDecorator>function (target: any, targetKey: string, index?: number) {\n    if (target === undefined) {\n        return optional();\n    } else {\n        optional()(target, targetKey, index);\n    }\n};\n","import { inject, named } from 'inversify';\nimport { ContainerProvider } from '../container';\n\nexport const VALUE = Symbol('Value');\n\nexport interface ValueOption {\n    el?: string,\n    detached?: boolean\n}\nexport namespace ValueOption {\n    export function is(option: any): option is ValueOption {\n        return option && (option.el !== undefined || option.detached !== undefined);\n    }\n}\n\nexport interface ValueDecorator {\n    (elOrValueOption?: string | ValueOption): (target: any, targetKey: string, index?: number) => any;\n    (target: any, targetKey: string, index?: number): any;\n}\n\nexport const Value = <ValueDecorator>function (target: any, targetKey: string, index?: number) {\n    const option = getValueOption(target, targetKey, index);\n    if (targetKey === undefined && index === undefined) {\n        return (t: any, tk: string, i?: number) => {\n            applyValueDecorator(option, t, tk, i);\n        };\n\n    } else {\n        applyValueDecorator(option, target, targetKey, index);\n    }\n};\n\nexport function getValueOption(target: any, targetKey: string, index?: number) {\n    let option: ValueOption = {};\n    if (targetKey === undefined) {\n        if (ValueOption.is(target)) {\n            option = { ...target };\n        } else if (target) {\n            option = { el: target };\n        }\n    }\n    return option;\n}\n\nexport function applyValueDecorator(option: ValueOption, target: any, targetKey: string, index?: number): void {\n    const defaultAutowiredOption: ValueOption = {\n        el: targetKey,\n        detached: false\n    };\n    const opt = { ...defaultAutowiredOption, ...option };\n    if (opt.detached) {\n        if (index !== undefined) {\n            throw new Error(`The ${target.constructor.name} itself is not injected into the container, so the parameter injection of the constructor is not supported.`);\n        }\n        createValueProperty(opt, target, targetKey);\n        return;\n    }\n\n    const el = <string>opt.el;\n    inject(VALUE)(target, targetKey, index);\n    named(el)(target, targetKey, index);\n}\n\nexport function createValueProperty(option: ValueOption, target: any, property: string) {\n    Object.defineProperty(target, property, {\n        enumerable: true,\n        get() {\n            const container = ContainerProvider.provide();\n            const el = <string>option.el;\n            return container.getNamed(VALUE, el);\n        }\n    });\n}\n","export const  MethodBeforeAdvice = Symbol('MethodBeforeAdvice');\nexport const  AfterReturningAdvice = Symbol('AfterReturningAdvice');\nexport const  AfterThrowsAdvice = Symbol('AfterThrowsAdvice');\n\nexport interface Advice { }\n\nexport interface BeforeAdvice extends Advice { }\n\nexport interface AfterAdvice extends Advice { }\n\nexport interface MethodBeforeAdvice extends BeforeAdvice {\n\n    before(method: string | number | symbol, args: any[], target: any): Promise<void>;\n\n}\n\nexport interface AfterReturningAdvice extends AfterAdvice {\n\n    afterReturning(returnValue: any, method: string | number | symbol, args: any[], target: any): Promise<void>;\n\n}\n\nexport interface AfterThrowsAdvice extends AfterAdvice {\n\n    afterThrows(error: any, method: string | number | symbol, args: any[], target: any): Promise<void>;\n\n}\n","export * from './aop-protocol';\nexport * from './method-advice';\n","import { Component } from '../annotation';\nimport { MethodBeforeAdvice, AfterReturningAdvice, AfterThrowsAdvice } from './aop-protocol';\n\n@Component(MethodBeforeAdvice)\nexport class NoOpMethodBeforeAdivice implements MethodBeforeAdvice {\n\n    async before(method: string | number | symbol, args: any[], target: any): Promise<void> { }\n}\n\n@Component(AfterReturningAdvice)\nexport class NoOpAfterReturningAdvice implements AfterReturningAdvice {\n\n    async afterReturning(returnValue: any, method: string | number | symbol, args: any[], target: any): Promise<void> { }\n}\n\n@Component(AfterThrowsAdvice)\nexport class NoOpAfterThrowsAdvice implements AfterThrowsAdvice {\n\n    async afterThrows(error: any, method: string | number | symbol, args: any[], target: any): Promise<void> { }\n}\n","export interface ApplicationError<C extends number, D> extends Error {\n    readonly code: C\n    readonly data: D\n    toJson(): ApplicationError.Literal<D>\n}\nexport namespace ApplicationError {\n    export interface Literal<D> {\n        message: string\n        data: D\n        stack?: string\n    }\n    export interface Constructor<C extends number, D> {\n        (...args: any[]): ApplicationError<C, D>;\n        code: C;\n        is(arg: object | undefined): arg is ApplicationError<C, D>\n    }\n    const codes: number[] = [];\n    export function declare<C extends number, D>(code: C, factory: (...args: any[]) => Literal<D>): Constructor<C, D> {\n        if (codes.indexOf(code) !== -1) {\n            throw new Error(`An application error for '${code}' code is already declared`);\n        }\n        const constructorOpt = Object.assign((...args: any[]) => new Impl(code, factory(...args), constructorOpt), {\n            code,\n            is(arg: object | undefined): arg is ApplicationError<C, D> {\n                return arg instanceof Impl && arg.code === code;\n            }\n        });\n        return constructorOpt;\n    }\n    export function is<C extends number, D>(arg: object | undefined): arg is ApplicationError<C, D> {\n        return arg instanceof Impl;\n    }\n    export function fromJson<C extends number, D>(code: C, raw: Literal<D>): ApplicationError<C, D> {\n        return new Impl(code, raw);\n    }\n    class Impl<C extends number, D> extends Error implements ApplicationError<C, D>  {\n        readonly data: D;\n        constructor(\n            readonly code: C,\n            raw: ApplicationError.Literal<D>,\n            constructorOpt?: Function\n        ) {\n            super(raw.message);\n            this.data = raw.data;\n            Object.setPrototypeOf(this, Impl.prototype);\n            if (raw.stack) {\n                this.stack = raw.stack;\n            } else if (Error.captureStackTrace && constructorOpt) {\n                Error.captureStackTrace(this, constructorOpt);\n            }\n        }\n        toJson(): ApplicationError.Literal<D> {\n            const { message, data, stack } = this;\n            return { message, data, stack };\n        }\n    }\n}\n","import { MaybePromise } from '../utils/prioritizeable';\nimport { Deferred } from '../utils/promise-util';\nimport { injectable } from 'inversify';\nimport { Logger } from '../logger';\nimport { Autowired, Component } from '../annotation';\nimport { Emitter, Event } from 'vscode-jsonrpc';\n\nexport const ApplicationLifecycle = Symbol('ApplicationLifecycle');\nexport const Application = Symbol('Application');\nexport const ApplicationStateService = Symbol('ApplicationStateService');\n\nexport interface ApplicationLifecycle<T extends Application> {\n\n    initialize?(): void;\n\n    onStart?(app: T): MaybePromise<void>;\n\n    onStop?(app: T): void;\n\n}\n\nexport interface Application {\n\n    start(): Promise<void>;\n\n}\n\n@Component(ApplicationLifecycle)\nexport class EmptyApplicationLifecycle implements ApplicationLifecycle<Application> {\n\n    initialize() {\n        // NOOP\n    }\n\n}\n\n@injectable()\nexport abstract class AbstractApplication implements Application {\n\n    @Autowired(ApplicationLifecycle)\n    protected readonly lifecycles: ApplicationLifecycle<Application>[];\n\n    abstract start(): Promise<void>;\n\n    @Autowired(Logger)\n    protected readonly logger: Logger;\n\n    /**\n     * Initialize and start the frontend application.\n     */\n    protected async doStart(): Promise<void> {\n        for (const lifecycle of this.lifecycles) {\n            if (lifecycle.initialize) {\n                try {\n                    lifecycle.initialize();\n                } catch (error) {\n                    this.logger.error('Could not initialize lifecycle', error);\n                }\n            }\n        }\n\n        // TODO\n\n        for (const lifecycle of this.lifecycles) {\n            if (lifecycle.onStart) {\n                try {\n                    await lifecycle.onStart(this);\n                } catch (error) {\n                    this.logger.error('Could not start lifecycle', error);\n                }\n            }\n        }\n    }\n\n    /**\n     * Stop the frontend application lifecycle.\n     */\n    protected doStop(): void {\n        for (const lifecycle of this.lifecycles) {\n            if (lifecycle.onStop) {\n                try {\n                    lifecycle.onStop(this);\n                } catch (error) {\n                    this.logger.error('Could not stop lifecycle', error);\n                }\n            }\n        }\n    }\n\n}\n\nexport type ApplicationState =\n    'init'\n    | 'started'\n    | 'ready';\n\nexport interface ApplicationStateService<T extends string> {\n    state: T;\n    readonly onStateChanged: Event<T>\n\n    reachedState(state: T): Promise<void>;\n\n    reachedAnyState(...states: T[]): Promise<void>;\n\n}\n@injectable()\nexport abstract class AbstractApplicationStateService<T extends string> implements ApplicationStateService<T> {\n\n    private _state = <T>'init';\n\n    protected deferred: { [state: string]: Deferred<void> } = {};\n    protected readonly stateChanged = new Emitter<T>();\n\n    get state(): T {\n        return this._state;\n    }\n\n    set state(state: T) {\n        if (state !== this._state) {\n            this.deferred[this._state] = new Deferred();\n            this._state = state;\n            if (this.deferred[state] === undefined) {\n                this.deferred[state] = new Deferred();\n            }\n            this.deferred[state].resolve();\n            this.stateChanged.fire(state);\n        }\n    }\n\n    get onStateChanged(): Event<T> {\n        return this.stateChanged.event;\n    }\n\n    reachedState(state: T): Promise<void> {\n        if (this.deferred[state] === undefined) {\n            this.deferred[state] = new Deferred();\n        }\n        return this.deferred[state].promise;\n    }\n\n    reachedAnyState(...states: T[]): Promise<void> {\n        return Promise.race(states.map(s => this.reachedState(s)));\n    }\n\n}\n","export * from './application-protocol';\nexport * from './application-error';\n","export const ConfigProvider = Symbol('ConfigProvider');\n\nexport interface ConfigProvider {\n    get<T>(key: string, defaultValue?: T): T;\n}\n","import { ConfigProvider } from './config-protocol';\nimport { Component } from '../annotation';\nconst jexl = require('jexl');\n\n@Component(ConfigProvider)\nexport class ConfigProviderImpl implements ConfigProvider {\n    get<T>(key: string, defaultValue?: T): T {\n        return jexl.evalSync(key, process.env.MALAGU_CONFIG) || defaultValue;\n    }\n\n}\n","export * from './config-protocol';\nexport * from './config-provider';\n","export const METADATA_KEY = {\n    rebind: 'malagu:rebind',\n    constantValue: 'malagu:constant-value',\n    toService: 'malagu:to-service',\n    provide: 'inversify-binding-decorators:provide'\n};\n","import { interfaces as inversifyInterfaces, ContainerModule } from 'inversify';\nimport interfaces from 'inversify-binding-decorators/dts/interfaces/interfaces';\nimport { METADATA_KEY } from '../constants';\nimport { CustomError } from 'ts-custom-error';\nimport { ConstantOption } from '../annotation/constant';\n\nclass NoOpError extends CustomError {\n}\n\nexport function autoBind(registry?: inversifyInterfaces.ContainerModuleCallBack): inversifyInterfaces.ContainerModule {\n    return new ContainerModule((bind, unbind, isBound, rebind) => {\n        const provideMetadata: interfaces.ProvideSyntax[] = Reflect.getMetadata(METADATA_KEY.provide, Reflect) || [];\n        provideMetadata.map(metadata => resolve(metadata, bind, rebind));\n        Reflect.defineMetadata(METADATA_KEY.provide, [], Reflect);\n        const constantMetadata: ConstantOption[] = Reflect.getMetadata(METADATA_KEY.constantValue, Reflect) || [];\n        constantMetadata.map(metadata => resolveConstant(metadata, bind, rebind));\n        Reflect.defineMetadata(METADATA_KEY.constantValue, [], Reflect);\n\n        if (registry) {\n            registry(bind, unbind, isBound, rebind);\n        }\n    });\n}\n\nfunction resolve(metadata: interfaces.ProvideSyntax, bind: inversifyInterfaces.Bind, rebind: inversifyInterfaces.Rebind) {\n    const isRebind: boolean = Reflect.getOwnMetadata(METADATA_KEY.rebind, metadata.implementationType);\n    const id = Reflect.getOwnMetadata(METADATA_KEY.toService, metadata.implementationType);\n\n    const bindWrapper = (serviceIdentifier: inversifyInterfaces.ServiceIdentifier<any>) => {\n        if (id && id !== serviceIdentifier) {\n            bind(serviceIdentifier).toService(id);\n            throw new NoOpError();\n        }\n        if (isRebind) {\n            return rebind(serviceIdentifier);\n        }\n        return bind(serviceIdentifier);\n    };\n    try {\n        metadata.constraint(bindWrapper, metadata.implementationType);\n    } catch (error) {\n        if (error instanceof NoOpError) {\n            return;\n        }\n        throw error;\n    }\n}\n\nfunction resolveConstant(metadata: ConstantOption, bind: inversifyInterfaces.Bind, rebind: inversifyInterfaces.Rebind) {\n    const ids = Array.isArray(metadata.id) ? metadata.id : [ metadata.id ];\n    const id = ids.shift();\n    if (metadata.rebind) {\n        rebind(id!).toConstantValue(metadata.constantValue);\n    } else {\n        bind(id!).toConstantValue(metadata.constantValue);\n    }\n\n    for (const item of ids) {\n        bind(item!).toService(id!);\n    }\n}\n","import { Container } from 'inversify';\n\nlet _container: Container;\n\nexport namespace ContainerProvider {\n    export function set(container: Container) {\n        _container = container;\n    }\n    export function provide() {\n        if (!_container) {\n            throw new Error('Container is not ready yet, the timing is incorrect.');\n        }\n        return _container;\n    }\n}\n","import { Container } from 'inversify';\n\n// dynamic loading component module at compile time\nexport const container: Promise<Container> = Promise.resolve(new Container());\n","export * from './container-provider';\nexport * from './auto-bind';\n","import { CustomError as BaseCustomError } from 'ts-custom-error';\n\nexport class CustomError extends BaseCustomError {\n\n}\n","export * from './error-protocol';\nexport * from './cutom-error';\nexport * from './validation-errors';\n","import { CustomError } from './cutom-error';\nimport { ValidationError } from 'class-validator';\n\nexport class ValidationErrors extends CustomError {\n\n    constructor(errors?: ValidationError[]) {\n        super(errors === undefined ? undefined : JSON.stringify(errors));\n    }\n\n}\n","export * from './utils';\nexport * from './annotation';\nexport * from './application';\nexport * from './logger';\nexport * from './container';\nexport * from './aop';\nexport * from './constants';\nexport * from './config';\nexport * from './error';\nexport * from './pipe';\n","import { Logger as ILoger } from 'vscode-jsonrpc';\n\nexport class ConsoleLogger implements ILoger {\n    public error(message: string): void {\n        console.error(message);\n    }\n\n    public warn(message: string): void {\n        console.warn(message);\n    }\n\n    public info(message: string): void {\n        console.info(message);\n    }\n\n    public log(message: string): void {\n        console.log(message);\n    }\n\n    public debug(message: string): void {\n        console.debug(message);\n    }\n}\n","export * from './logger-protocol';\nexport * from './console-logger';\n","import * as log from 'loglevel';\nimport { Component, Value } from '../annotation';\n\nexport const LOGGER_CONFIG = 'malagu.logger';\nexport const Logger = Symbol('Logger');\n\nexport type LogLevel = 'verbose' | 'debug' | 'info' | 'warn' | 'error';\n\nexport interface Logger {\n    info(message: any, context?: string): void;\n    error(message: any, context?: string): void;\n    warn(message: any, context?: string): void;\n    debug(message: any, context?: string): void;\n}\n\n@Component(Logger)\nexport class LoggerImpl implements Logger {\n    protected instance: Logger;\n\n    constructor(\n        @Value(LOGGER_CONFIG) protected readonly config: any\n    ) {\n        if (config.level) {\n            log.setLevel(config.level);\n        } else {\n            log.setLevel('error');\n        }\n    }\n\n    error(message: any, context = '') {\n        return log.error(message, context);\n    }\n\n    info(message: any, context = '') {\n        return log.info(message, context);\n    }\n\n    warn(message: any, context = '') {\n        return log.warn(message, context);\n    }\n\n    debug(message: any, context = '') {\n        return log.debug(message, context);\n    }\n\n}\n","export * from './pipe-manager';\nexport * from './pipe-protocol';\nexport * from './pipe-provider';\nexport * from './pipe-transtorm';\n","import { Component, Autowired } from '../annotation';\nimport { PipeManager, PipeProvider, MethodMetadata } from './pipe-protocol';\nimport { getTarget } from '../utils';\n\n@Component(PipeManager)\nexport class PipeManagerImpl implements PipeManager {\n\n    @Autowired(PipeProvider)\n    protected readonly pipeProvider: PipeProvider;\n\n    async apply(metadata: MethodMetadata, args: any[]): Promise<void> {\n        const paramTypes = Reflect.getMetadata('design:paramtypes', getTarget(metadata.target), metadata.method);\n        if (paramTypes) {\n            for (let index = 0; index < args.length; index++) {\n                let arg = args[index];\n                for (const pipe of this.pipeProvider.provide()) {\n                    arg = await pipe.transform(arg, { argType: index < paramTypes.length ? paramTypes[index] : undefined });\n                }\n                args[index] = arg;\n            }\n        }\n    }\n\n}\n","import { Type } from '../utils';\n\nexport const PipeTransform = Symbol('PipeTransform');\nexport const PipeProvider = Symbol('PipeProvider');\nexport const PipeManager = Symbol('PipeManager');\n\nexport interface ArgumentMetadata {\n\n    readonly argType?: Type<any>;\n\n    readonly data?: string;\n}\n\nexport interface MethodMetadata {\n\n    readonly target: Type<any>;\n\n    readonly method: string | symbol;\n}\n\nexport interface PipeTransform<T = any, R = any> {\n    readonly priority: number;\n    transform(value: T, metadata: ArgumentMetadata): R;\n}\n\nexport interface PipeProvider {\n    provide(): PipeTransform[];\n}\n\nexport interface PipeManager {\n    apply(metadata: MethodMetadata, args: any[]): Promise<void>;\n}\n","import { Component, Autowired } from '../annotation';\nimport { PipeTransform, PipeProvider } from './pipe-protocol';\nimport { Prioritizeable } from '../utils';\n\n@Component(PipeProvider)\nexport class PipeProviderImpl implements PipeProvider {\n\n    protected prioritized: PipeTransform[];\n\n    constructor(\n        @Autowired(PipeTransform)\n        protected readonly pipes: PipeTransform[]\n    ) { }\n\n    provide(): PipeTransform[] {\n        if (!this.prioritized) {\n            this.prioritized = Prioritizeable.prioritizeAllSync(this.pipes).map(c => c.value);\n        }\n        return this.prioritized;\n    }\n\n}\n","import { Component, Value } from '../annotation';\nimport { PipeTransform, ArgumentMetadata } from './pipe-protocol';\nimport { ValidationErrors } from '../error';\nimport { isNull } from 'util';\nimport { validate } from 'class-validator';\nimport { classToPlain, plainToClass } from 'class-transformer';\n\n@Component(PipeTransform)\nexport class ValidationPipe implements PipeTransform<any> {\n\n    @Value('malagu.core.validationPipeOptions')\n    protected options: any;\n\n    readonly priority = 1000;\n\n    public async transform(value: any, metadata: ArgumentMetadata) {\n        const opts = this.options || {};\n        const { argType } = metadata;\n        if (!argType || !this.toValidate(metadata)) {\n            return value;\n        }\n        const originalValue = value;\n        value = this.toEmptyIfNil(value);\n\n        const isNil = value !== originalValue;\n        const isPrimitive = this.isPrimitive(value);\n        this.stripProtoKeys(value);\n        let entity = plainToClass(\n            argType,\n            value,\n            opts.transformOptions,\n        );\n\n        const originalEntity = entity;\n        const isCtorNotEqual = entity.constructor !== argType;\n\n        if (isCtorNotEqual && !isPrimitive) {\n            entity.constructor = argType;\n        } else if (isCtorNotEqual) {\n            // when \"entity\" is a primitive value, we have to temporarily\n            // replace the entity to perform the validation against the original\n            // metatype defined inside the handler\n            entity = { constructor: argType } as any;\n        }\n\n        const errors = await validate(entity, opts.validatorOptions);\n        if (errors.length > 0) {\n            throw new ValidationErrors(opts.detailedOutputDisabled ? undefined : errors);\n        }\n        if (isPrimitive) {\n            // if the value is a primitive value and the validation process has been successfully completed\n            // we have to revert the original value passed through the pipe\n            entity = originalEntity;\n        }\n        if (opts.transformEnabled) {\n            return entity;\n        }\n        if (isNil) {\n            // if the value was originally undefined or null, revert it back\n            return originalValue;\n        }\n        return Object.keys(opts.validatorOptions).length > 0\n            ? classToPlain(entity, opts.transformOptions)\n            : value;\n    }\n\n    private toValidate(metadata: ArgumentMetadata): boolean {\n        const { argType } = metadata;\n        const types = [String, Boolean, Number, Array, Object];\n        return !types.some(t => argType === t) && !isNull(argType);\n    }\n\n    private toEmptyIfNil<T = any, R = any>(value: T): R | {} {\n        return isNull(value) ? {} : value;\n    }\n\n    private stripProtoKeys(value: Record<string, any>) {\n        delete value.__proto__;\n        const keys = Object.keys(value);\n        keys\n            .filter(key => typeof value[key] === 'object' && value[key])\n            .forEach(key => this.stripProtoKeys(value[key]));\n    }\n\n    private isPrimitive(value: unknown): boolean {\n        return ['number', 'boolean', 'string'].indexOf(typeof value) !== -1;\n    }\n}\n","export function getSuperClasses(constructor: any) {\n    const constructors = [];\n    let current = constructor;\n    while (Object.getPrototypeOf(current)) {\n        current = Object.getPrototypeOf(current);\n        constructors.push(current);\n    }\n    return constructors;\n}\n","import { Disposable } from 'vscode-jsonrpc/lib/events';\n\nexport {\n    Disposable\n};\n\nexport class DisposableCollection implements Disposable {\n    protected readonly disposables: Disposable[] = [];\n\n    constructor(...toDispose: Disposable[]) {\n        toDispose.forEach(d => this.push(d));\n    }\n\n    dispose(): void {\n        while (this.disposables.length !== 0) {\n            this.disposables.pop()!.dispose();\n        }\n    }\n\n    get disposed(): boolean {\n        return this.disposables.length === 0;\n    }\n\n    push(disposable: Disposable): Disposable {\n        const disposables = this.disposables;\n        disposables.push(disposable);\n        return {\n            dispose(): void {\n                const index = disposables.indexOf(disposable);\n                if (index !== -1) {\n                    disposables.splice(index, 1);\n                }\n            }\n        };\n    }\n\n}\n","export * from './prioritizeable';\nexport * from './promise-util';\nexport * from './types';\nexport * from './class-util';\nexport * from './metadata-util';\nexport * from './disposable';\nexport * from './os';\nexport * from './proxy-util';\n","import { getSuperClasses } from './class-util';\n\nexport function getOwnMetadata(metadataKey: string, constructor: Object, propertyKey?: string | symbol): any {\n    const constructors = [ constructor, ...getSuperClasses(constructor) ];\n    let result: any[] = [];\n    for (let index = 0; index < constructors.length; index++) {\n        const c = constructors[constructors.length - index - 1];\n        let metadata: any[];\n        if (propertyKey) {\n            metadata = Reflect.getOwnMetadata(metadataKey, c, propertyKey);\n        } else {\n            metadata = Reflect.getOwnMetadata(metadataKey, c);\n        }\n\n        if (metadata) {\n            if (Array.isArray(metadata)) {\n                result = [ ...result, ...metadata ];\n            } else {\n                return metadata;\n            }\n        }\n    }\n    return result;\n}\n","function is(userAgent: string, platform: string): boolean {\n    if (typeof navigator !== 'undefined') {\n        if (navigator.userAgent && navigator.userAgent.indexOf(userAgent) >= 0) {\n            return true;\n        }\n    }\n    if (typeof process !== 'undefined') {\n        return (process.platform === platform);\n    }\n    return false;\n}\n\nexport const isWindows = is('Windows', 'win32');\nexport const isOSX = is('Mac', 'darwin');\n\nexport type CMD = [string, string[]];\nexport function cmd(command: string, ...args: string[]): CMD {\n    return [\n        isWindows ? 'cmd' : command,\n        isWindows ? ['/c', command, ...args] : args\n    ];\n}\n\nexport namespace OS {\n\n    /**\n     * Enumeration of the supported operating systems.\n     */\n    export enum Type {\n        Windows = 'Windows',\n        Linux = 'Linux',\n        OSX = 'OSX'\n    }\n\n    /**\n     * Returns with the type of the operating system. If it is neither [Windows](isWindows) nor [OS X](isOSX), then\n     * it always return with the `Linux` OS type.\n     */\n    export function type(): OS.Type {\n        if (isWindows) {\n            return Type.Windows;\n        }\n        if (isOSX) {\n            return Type.OSX;\n        }\n        return Type.Linux;\n    }\n\n}\n","export type MaybeArray<T> = T | T[];\nexport type MaybePromise<T> = T | Promise<T> | PromiseLike<T>;\n\nexport interface Prioritizeable<T> {\n    readonly priority: number;\n    readonly value: T;\n}\n\nexport namespace Prioritizeable {\n    export type GetPriority<T> = (value: T) => MaybePromise<number>;\n    export type GetPrioritySync<T> = (value: T) => number;\n    export async function toPrioritizeable<T>(rawValue: MaybePromise<T>, getPriority: GetPriority<T>): Promise<Prioritizeable<T>>;\n    export async function toPrioritizeable<T>(rawValue: MaybePromise<T>[], getPriority: GetPriority<T>): Promise<Prioritizeable<T>[]>;\n    export async function toPrioritizeable<T>(rawValue: MaybeArray<MaybePromise<T>>, getPriority: GetPriority<T>): Promise<MaybeArray<Prioritizeable<T>>> {\n        if (rawValue instanceof Array) {\n            return Promise.all(\n                rawValue.map(v => toPrioritizeable(v, getPriority))\n            );\n        }\n        const value = await rawValue;\n        const priority = await getPriority(value);\n        return { priority, value };\n    }\n    export function toPrioritizeableSync<T>(rawValue: T[], getPriority: GetPrioritySync<T> = value => (<any>value).priority): Prioritizeable<T>[] {\n        return rawValue.map(v => ({\n            value: v,\n            priority: getPriority(v)\n        }));\n    }\n    export function prioritizeAllSync<T>(values: T[], getPriority?: GetPrioritySync<T>): Prioritizeable<T>[] {\n        const prioritizeable = toPrioritizeableSync(values, getPriority);\n        return prioritizeable.filter(isValid).sort(compare);\n    }\n    export async function prioritizeAll<T>(values: MaybePromise<T>[], getPriority: GetPriority<T>): Promise<Prioritizeable<T>[]> {\n        const prioritizeable = await toPrioritizeable(values, getPriority);\n        return prioritizeable.filter(isValid).sort(compare);\n    }\n    export function isValid<T>(p: Prioritizeable<T>): boolean {\n        return p.priority > 0;\n    }\n    export function compare<T>(p: Prioritizeable<T>, p2: Prioritizeable<T>): number {\n        return p2.priority - p.priority;\n    }\n}\n","export class Deferred<T> {\n    resolve: (value?: T) => void;\n    reject: (err?: any) => void; // tslint:disable-line\n\n    promise = new Promise<T>((resolve, reject) => {\n        this.resolve = resolve;\n        this.reject = reject;\n    });\n}\n","\nexport function getTargetClass(obj: any) {\n    return obj.target ? obj.target.constructor : obj.constructor;\n\n}\n\nexport function getTarget(obj: any) {\n    return obj.target || obj;\n\n}\n","import { ApplicationState, AbstractApplicationStateService, ApplicationStateService, Component } from '../../common';\n\nexport type BackendApplicationState = ApplicationState;\n\n@Component(ApplicationStateService)\nexport class BackendApplicationStateService extends AbstractApplicationStateService<BackendApplicationState> {\n\n}\n","import { ApplicationStateService, AbstractApplication, Application, Component, Autowired } from '../../common';\nimport { BackendApplicationStateService } from './backend-application-state';\n\n@Component(Application)\nexport class BackendApplication extends AbstractApplication {\n\n    @Autowired(ApplicationStateService)\n    protected readonly stateService: BackendApplicationStateService;\n\n    async start(): Promise<void> {\n        this.setupExitSignals();\n        await this.doStart();\n        this.stateService.state = 'started';\n        this.stateService.state = 'ready';\n    }\n\n    protected setupExitSignals() {\n        process.removeListener('SIGINT', this.doExit);\n        process.removeListener('SIGTERM', this.doExit);\n\n        process.on('SIGINT', this.doExit.bind(this));\n        process.on('SIGTERM', this.doExit.bind(this));\n    }\n\n    protected doExit() {\n        this.doStop();\n        process.exit(0);\n    }\n}\n","export * from './backend-application';\nexport * from './backend-application-state';\n","export * from './application';\n","export * from '../common';\nimport 'reflect-metadata';\nimport { autoBind, ConfigProvider, VALUE } from '../common';\nexport * from '.';\n\nexport const CoreBackendModule = autoBind(bind => {\n    bind(VALUE).toDynamicValue(ctx => {\n        const namedMetadata = ctx.currentRequest.target.getNamedTag();\n        const el = namedMetadata!.value.toString();\n        const configProvider = ctx.container.get<ConfigProvider>(ConfigProvider);\n        return configProvider.get(el);\n    });\n});\n","import { HttpContext } from '@malagu/web/lib/node';\nimport * as http from 'http';\n\nexport type Callback = (err: Error | undefined, data: any) => void;\n\nexport function parseApiGatewayContext(event: string, context: any, callback: Callback) {\n    const e = JSON.parse(event);\n    const request = {\n        method: e.method,\n        path: e.path,\n        url: e.path,\n        connection: {} as any,\n        query: e.queryParameters || {},\n        headers: e.headers,\n        get body() {\n            const body = e.isBase64Encoded ? Buffer.from(e.body, 'base64').toString('utf8') : e.body;\n            if (e.headers['content-type'] === 'application/json') {\n                return JSON.parse(body);\n            }\n        }\n\n    };\n    const res: { [key: string]: any } = {\n        headers: {},\n        isBase64Encoded: false\n    };\n    const response = {\n        setHeader(name: string, value: number | string | string[]): void {\n            res.headers[name] = value;\n        },\n\n        getHeader(name: string): number | string | string[] | undefined {\n            return this.getHeaders()[name];\n        },\n\n        getHeaders(): http.OutgoingHttpHeaders {\n            return res.headers;\n        },\n\n        get statusCode(): number {\n            return res.statusCode;\n        },\n\n        finished: false,\n\n        set statusCode(statusCode: number) {\n            res.statusCode = statusCode;\n        },\n\n        end: (chunk: any, encoding?: string, cb?: Function): void => {\n            callback(undefined, {\n                ...res,\n                body: chunk\n            });\n        }\n\n    };\n\n    const ctx = new HttpContext(request, response);\n    (ctx as any).event = event;\n    (ctx as any).context = context;\n    (ctx as any).callback = callback;\n    return ctx;\n}\n\nexport function ParseHttpTriggerContext(req: any, res: any, context: any) {\n    const request = req;\n    if (req.queries) {\n        request.query = req.queries;\n        request.connection = {} as any;\n    }\n    if (req.headers['content-type'] === 'application/json') {\n        request.body = request.body ? JSON.parse(request.body) : request.body;\n    }\n    const response = {\n        setHeader(name: string, value: number | string | string[]): void {\n            res.setHeader(name, value);\n        },\n\n        getHeader(name: string): number | string | string[] | undefined {\n            return res.getHeader ? res.getHeader(name) : (this.getHeaders()[name] ? this.getHeaders()[name] : res.headersMap[name]);\n        },\n\n        getHeaders(): http.OutgoingHttpHeaders {\n            return res.headers || res.getHeaders();\n        },\n\n        get statusCode(): number {\n            return res.statusCode;\n        },\n\n        set statusCode(statusCode: number) {\n            res.statusCode = statusCode;\n        },\n\n        finished: false,\n\n        end(chunk: any, encoding?: string, cb?: Function): void {\n            this.finished = true;\n            // eslint-disable-next-line no-null/no-null\n            res.send(chunk === undefined || chunk === null ? '' : chunk);\n        }\n    };\n    const ctx = new HttpContext(request, response);\n    (ctx as any).context = context;\n    return ctx;\n}\n","import { container } from '@malagu/core/lib/common/container/dynamic-container';\nimport { ContainerProvider, Application } from '@malagu/core';\nimport { Dispatcher, Context, HttpContext } from '@malagu/web/lib/node';\nimport { ParseHttpTriggerContext } from './context';\nimport * as getRawBody from 'raw-body';\n\nexport async function init(context: any, callback: any) {\n    try {\n        const c = await container;\n        ContainerProvider.set(c);\n        await c.get<Application>(Application).start();\n        callback(undefined, '');\n    } catch (err) {\n        callback(err);\n    }\n}\n\nexport async function handler(request: any, response: any, context: any) {\n    try {\n        request.body = await getRawBody(request).then(body => body.toString());\n        const httpContext = ParseHttpTriggerContext(request, response, context);\n        const c = await container;\n        const dispatcher = c.get<Dispatcher<HttpContext>>(Dispatcher);\n        Context.run(() => dispatcher.dispatch(httpContext));\n    } catch (err) {\n        console.log(err);\n        response.statusCode = 500;\n        response.send(err);\n    }\n}\n","import { autoBind } from '@malagu/core';\n\nexport default autoBind();\n","export const MVC_PATH = 'malagu.mvc.path';\n","export * from './constants';\n","import { METADATA_KEY } from '../constants';\n\nexport interface BodyMetadata {\n    name?: string;\n    parameterIndex: number;\n}\n\nexport interface BodyDecorator {\n    (name?: string): (target: any, targetKey: string, parameterIndex: number) => any;\n    (target: any, targetKey: string, parameterIndex: number): any;\n}\n\nexport const Body = <BodyDecorator>function (target: any, targetKey: string | symbol, parameterIndex: number) {\n    if (targetKey === undefined) {\n        return (t: any, tk: string, i: number) => {\n            applyBodyDecorator(t, tk, i, target);\n        };\n\n    } else {\n        applyBodyDecorator(target, targetKey, parameterIndex);\n    }\n};\n\nexport function applyBodyDecorator(target: any, targetKey: string | symbol, parameterIndex: number, name?: string): void {\n    const metadatas: BodyMetadata[] = Reflect.getOwnMetadata(METADATA_KEY.controllerBody, target.constructor, targetKey) || [];\n    metadatas.push({ name, parameterIndex });\n    Reflect.defineMetadata(METADATA_KEY.controllerBody, metadatas, target.constructor, targetKey);\n}\n","import { METADATA_KEY } from '../constants';\nimport { ErrorType } from '@malagu/core';\n\nexport interface CatchMetadata {\n    errorTypes: ErrorType[];\n    target: any;\n    key: string;\n    descriptor: TypedPropertyDescriptor<Function>;\n}\n\nexport interface CatchDecorator {\n    (errorTypes: ErrorType | ErrorType[]): MethodDecorator;\n}\n\nexport const Catch = <CatchDecorator>function (errorTypes: ErrorType | ErrorType[]) {\n    return (t: any, k: string, d: TypedPropertyDescriptor<Function>) => {\n        applyCatchDecorator(t, k, d, Array.isArray(errorTypes) ? errorTypes : [ errorTypes ]);\n    };\n};\n\nexport function applyCatchDecorator(target: any, key: string, descriptor: TypedPropertyDescriptor<Function>, errorTypes: ErrorType[]): void {\n    const metadata: CatchMetadata = { errorTypes, target, key, descriptor };\n    let metadataList: CatchMetadata[] = [];\n\n    if (!Reflect.hasOwnMetadata(METADATA_KEY.controllerCatch, target.constructor)) {\n        Reflect.defineMetadata(METADATA_KEY.controllerCatch, metadataList, target.constructor);\n    } else {\n        metadataList = Reflect.getOwnMetadata(METADATA_KEY.controllerCatch, target.constructor);\n    }\n    metadataList.push(metadata);\n}\n","import { METADATA_KEY } from '../constants';\nimport { Component } from '@malagu/core';\n\nexport const CONTROLLER = Symbol('Controller');\n\nexport interface ControllerMetadata {\n    path: string;\n    target: any;\n}\n\nexport function Controller(path: string = '') {\n    return function (target: any) {\n        const metadata: ControllerMetadata = { path, target };\n        Reflect.defineMetadata(METADATA_KEY.controller, metadata, target);\n        Component({ id: CONTROLLER, proxy: true })(target);\n    };\n}\n","import { METADATA_KEY } from '../constants';\n\nexport interface RequestCookieMetadata {\n    name?: string;\n    parameterIndex: number;\n}\n\nexport interface ResponseCookieMetadata {\n    name: string;\n    value: string;\n}\n\nexport interface CookieDecorator {\n    (name?: string): (target: any, targetKey: string, parameterIndex: number) => any;\n    (target: any, targetKey: string, parameterIndex: number): any;\n    (name: string, value: string): (target: any, targetKey: string, descriptor: PropertyDescriptor) => any;\n\n}\n\nexport const Cookie = <CookieDecorator>function (target: any, targetKey: string, parameterIndex: number) {\n    if (parameterIndex !== undefined) {\n        applyRequestCookieDecorator(target, targetKey, parameterIndex);\n    } else if (target && targetKey) {\n        return (t: any, tk: string, d: PropertyDescriptor) => {\n            applyResponseCookieDecorator(t, tk, d, target, targetKey);\n        };\n    } else {\n        return (t: any, tk: string, i: number) => {\n            applyRequestCookieDecorator(t, tk, i, target);\n        };\n    }\n};\n\nexport function applyRequestCookieDecorator(target: any, targetKey: string | symbol, parameterIndex: number, name?: string): void {\n    const metadatas: RequestCookieMetadata[] = Reflect.getOwnMetadata(METADATA_KEY.controllerRequestCookie, target.constructor, targetKey) || [];\n    metadatas.push({ name, parameterIndex });\n    Reflect.defineMetadata(METADATA_KEY.controllerRequestCookie, metadatas, target.constructor, targetKey);\n}\n\nexport function applyResponseCookieDecorator(target: any, targetKey: string | symbol, descriptor: PropertyDescriptor, name: string, value: string): void {\n    const metadatas: ResponseCookieMetadata[] = Reflect.getOwnMetadata(METADATA_KEY.controllerResponseCookie, target.constructor, targetKey) || [];\n    metadatas.push({ name, value  });\n    Reflect.defineMetadata(METADATA_KEY.controllerResponseCookie, metadatas, target.constructor, targetKey);\n}\n","import { METADATA_KEY } from '../constants';\n\nexport interface RequestHeaderMetadata {\n    name?: string;\n    parameterIndex: number;\n}\n\nexport interface ResponseHeaderMetadata {\n    name: string;\n    value: string;\n}\n\nexport interface HeaderDecorator {\n    (name?: string): (target: any, targetKey: string, parameterIndex: number) => any;\n    (target: any, targetKey: string, parameterIndex: number): any;\n    (name: string, value: string): (target: any, targetKey: string, descriptor: PropertyDescriptor) => any;\n\n}\n\nexport const Header = <HeaderDecorator>function (target: any, targetKey: string, parameterIndex: number) {\n    if (parameterIndex !== undefined) {\n        applyRequestHeaderDecorator(target, targetKey, parameterIndex);\n    } else if (target && targetKey) {\n        return (t: any, tk: string, d: PropertyDescriptor) => {\n            applyResponseHeaderDecorator(t, tk, d, target, targetKey);\n        };\n    } else {\n        return (t: any, tk: string, i: number) => {\n            applyRequestHeaderDecorator(t, tk, i, target);\n        };\n    }\n};\n\nexport function applyRequestHeaderDecorator(target: any, targetKey: string | symbol, parameterIndex: number, name?: string): void {\n    const metadatas: RequestHeaderMetadata[] = Reflect.getOwnMetadata(METADATA_KEY.controllerRequestHeader, target.constructor, targetKey) || [];\n    metadatas.push({ name, parameterIndex });\n    Reflect.defineMetadata(METADATA_KEY.controllerRequestHeader, metadatas, target.constructor, targetKey);\n}\n\nexport function applyResponseHeaderDecorator(target: any, targetKey: string | symbol, descriptor: PropertyDescriptor, name: string, value: string): void {\n    const metadatas: ResponseHeaderMetadata[] = Reflect.getOwnMetadata(METADATA_KEY.controllerResponseHeader, target.constructor, targetKey) || [];\n    metadatas.push({ name, value  });\n    Reflect.defineMetadata(METADATA_KEY.controllerResponseHeader, metadatas, target.constructor, targetKey);\n}\n","export * from './body';\nexport * from './controller';\nexport * from './header';\nexport * from './method';\nexport * from './param';\nexport * from './query';\nexport * from './view';\nexport * from './cookie';\nexport * from './session';\nexport * from './catch';\n","import { METADATA_KEY } from '../constants';\n\nexport type StrOrRegex = string | RegExp;\nexport type RouteOptions = StrOrRegex | { path: StrOrRegex } | { options: Object, path: StrOrRegex } & Object;\n\nexport interface MethodMetadata {\n    options: RouteOptions;\n    target: any;\n    method: string;\n    key: string;\n    descriptor: TypedPropertyDescriptor<Function>;\n}\n\nexport interface MethodDecorator {\n    (\n        method: string,\n        options?: RouteOptions,\n    ): (target: any, key: string, descriptor: TypedPropertyDescriptor<Function>) => void;\n}\n\nexport interface HandlerDecorator {\n    (target: any, key: string, descriptor: TypedPropertyDescriptor<Function>): void;\n}\n\nexport function Get(options?: RouteOptions): HandlerDecorator {\n    return Method('get', options);\n}\n\nexport function Post(options?: RouteOptions): HandlerDecorator {\n    return Method('post', options);\n}\n\nexport function Put(options?: RouteOptions): HandlerDecorator {\n    return Method('put', options);\n}\n\nexport function Patch(options?: RouteOptions): HandlerDecorator {\n    return Method('patch', options);\n}\n\nexport function Head(options?: RouteOptions): HandlerDecorator {\n    return Method('head', options);\n}\n\nexport function Delete(options?: RouteOptions): HandlerDecorator {\n    return Method('delete', options);\n}\n\nexport function Options(options?: RouteOptions): HandlerDecorator {\n    return Method('options', options);\n}\n\nexport const Method = <MethodDecorator>function (\n    method: string,\n    options: RouteOptions = '',\n): HandlerDecorator {\n    return function (target: any, key: string, descriptor: TypedPropertyDescriptor<Function>) {\n        const metadata: MethodMetadata = { options, method, target, key, descriptor };\n        let metadataList: MethodMetadata[] = [];\n\n        if (!Reflect.hasOwnMetadata(METADATA_KEY.controllerMethod, target.constructor)) {\n            Reflect.defineMetadata(METADATA_KEY.controllerMethod, metadataList, target.constructor);\n        } else {\n            metadataList = Reflect.getOwnMetadata(METADATA_KEY.controllerMethod, target.constructor);\n        }\n        metadataList.push(metadata);\n    };\n};\n","import { METADATA_KEY } from '../constants';\n\nexport interface ParamMetadata {\n    name?: string;\n    parameterIndex: number;\n}\n\nexport interface ParamDecorator {\n    (name?: string): (target: any, targetKey: string, parameterIndex: number) => any;\n    (target: any, targetKey: string, parameterIndex: number): any;\n}\n\nexport const Param = <ParamDecorator>function (target: any, targetKey: string | symbol, parameterIndex: number) {\n    if (targetKey === undefined) {\n        return (t: any, tk: string, i: number) => {\n            applyParamDecorator(t, tk, i, target);\n        };\n\n    } else {\n        applyParamDecorator(target, targetKey, parameterIndex);\n    }\n};\n\nexport function applyParamDecorator(target: any, targetKey: string | symbol, parameterIndex: number, name?: string): void {\n    const metadatas: ParamMetadata[] = Reflect.getOwnMetadata(METADATA_KEY.controllerParam, target.constructor, targetKey) || [];\n    metadatas.push({ name, parameterIndex });\n    Reflect.defineMetadata(METADATA_KEY.controllerParam, metadatas, target.constructor, targetKey);\n}\n","import { METADATA_KEY } from '../constants';\n\nexport interface QueryMetadata {\n    name?: string;\n    parameterIndex: number;\n}\n\nexport interface QueryDecorator {\n    (name?: string): (target: any, targetKey: string, parameterIndex: number) => any;\n    (target: any, targetKey: string, parameterIndex: number): any;\n}\n\nexport const Query = <QueryDecorator>function (target: any, targetKey: string | symbol, parameterIndex: number) {\n    if (targetKey === undefined) {\n        return (t: any, tk: string, i: number) => {\n            applyQueryDecorator(t, tk, i, target);\n        };\n\n    } else {\n        applyQueryDecorator(target, targetKey, parameterIndex);\n    }\n};\n\nexport function applyQueryDecorator(target: any, targetKey: string | symbol, parameterIndex: number, name?: string): void {\n    const metadatas: QueryMetadata[] = Reflect.getOwnMetadata(METADATA_KEY.controllerQuery, target.constructor, targetKey) || [];\n    metadatas.push({ name, parameterIndex });\n    Reflect.defineMetadata(METADATA_KEY.controllerQuery, metadatas, target.constructor, targetKey);\n}\n","import { METADATA_KEY } from '../constants';\n\nexport interface RequestSessionMetadata {\n    name?: string;\n    parameterIndex: number;\n}\n\nexport interface ResponseSessionMetadata {\n    name: string;\n    value: string;\n}\n\nexport interface SessionDecorator {\n    (name?: string): (target: any, targetKey: string, parameterIndex: number) => any;\n    (target: any, targetKey: string, parameterIndex: number): any;\n    (name: string, value: string): (target: any, targetKey: string, descriptor: PropertyDescriptor) => any;\n\n}\n\nexport const Session = <SessionDecorator>function (target: any, targetKey: string, parameterIndex: number) {\n    if (parameterIndex !== undefined) {\n        applyRequestSessionDecorator(target, targetKey, parameterIndex);\n    } else if (target && targetKey) {\n        return (t: any, tk: string, d: PropertyDescriptor) => {\n            applyResponseSessionDecorator(t, tk, d, target, targetKey);\n        };\n    } else {\n        return (t: any, tk: string, i: number) => {\n            applyRequestSessionDecorator(t, tk, i, target);\n        };\n    }\n};\n\nexport function applyRequestSessionDecorator(target: any, targetKey: string | symbol, parameterIndex: number, name?: string): void {\n    const metadatas: RequestSessionMetadata[] = Reflect.getOwnMetadata(METADATA_KEY.controllerRequestSession, target.constructor, targetKey) || [];\n    metadatas.push({ name, parameterIndex });\n    Reflect.defineMetadata(METADATA_KEY.controllerRequestSession, metadatas, target.constructor, targetKey);\n}\n\nexport function applyResponseSessionDecorator(target: any, targetKey: string | symbol, descriptor: PropertyDescriptor, name: string, value: string): void {\n    const metadatas: ResponseSessionMetadata[] = Reflect.getOwnMetadata(METADATA_KEY.controllerResponseSession, target.constructor, targetKey) || [];\n    metadatas.push({ name, value  });\n    Reflect.defineMetadata(METADATA_KEY.controllerResponseSession, metadatas, target.constructor, targetKey);\n}\n","import { METADATA_KEY } from '../constants';\n\nexport interface ViewMetadata {\n    viewName: string;\n}\n\nexport interface ViewDecorator {\n    (viewName: string): (target: any, key: string, descriptor: TypedPropertyDescriptor<Function>) => void;\n}\n\nexport const View = <ViewDecorator>function (viewName: string) {\n    return (t: any, k: string, d: TypedPropertyDescriptor<Function>) => {\n        applyViewDecorator(t, k, d, viewName);\n    };\n};\n\nexport function applyViewDecorator(target: any, targetKey: string, descriptor: TypedPropertyDescriptor<Function>, viewName: string): void {\n    Reflect.defineMetadata(METADATA_KEY.controllerView, { viewName }, target.constructor, targetKey);\n}\n","export const METADATA_KEY = {\n    controller: 'malagu:controller',\n    controllerMethod: 'malagu:controller-method',\n    controllerParam: 'malagu:controller-param',\n    controllerRequestHeader: 'malagu:controller-request-header',\n    controllerResponseHeader: 'malagu:controller-response-header',\n    controllerRequestCookie: 'malagu:controller-request-cookie',\n    controllerResponseCookie: 'malagu:controller-response-cookie',\n    controllerRequestSession: 'malagu:controller-request-session',\n    controllerResponseSession: 'malagu:controller-response-session',\n    controllerQuery: 'malagu:controller-query',\n    controllerBody: 'malagu:controller-body',\n    controllerView: 'malagu:controller-view',\n    controllerCatch: 'malagu:controller-catch'\n\n};\n","import { Component, Autowired, Value } from '@malagu/core';\nimport { PathResolver } from '@malagu/web';\nimport { Context, RequestMatcher, HandlerAdapter } from '@malagu/web/lib/node';\nimport { ViewResolver, ResponseResolverProvider, MethodArgsResolverProvider } from '../resolver';\nimport { MVC_HANDLER_ADAPTER_PRIORITY, RouteMetadataMatcher } from './handler-protocol';\nimport { MVC_PATH } from '../../common';\nimport { PipeManager } from '@malagu/core';\nimport { NotFoundAndContinueError } from '@malagu/web/lib/node';\n\n@Component(HandlerAdapter)\nexport class MvcHandlerAdapter implements HandlerAdapter {\n    readonly priority = MVC_HANDLER_ADAPTER_PRIORITY;\n\n    @Autowired(MethodArgsResolverProvider)\n    protected readonly methodArgsResolverProvider: MethodArgsResolverProvider;\n\n    @Autowired(ResponseResolverProvider)\n    protected readonly responseResolverProvider: ResponseResolverProvider;\n\n    @Autowired(ViewResolver)\n    protected readonly viewResolver: ViewResolver;\n\n    @Autowired(RequestMatcher)\n    protected readonly requestMatcher: RequestMatcher;\n\n    @Autowired(PathResolver)\n    protected readonly pathResolver: PathResolver;\n\n    @Autowired(PipeManager)\n    protected readonly pipeManager: PipeManager;\n\n    @Value(MVC_PATH)\n    protected readonly mvcPath: string;\n\n    @Autowired(RouteMetadataMatcher)\n    protected readonly routeMetadataMatcher: RouteMetadataMatcher;\n\n    protected async resolveMethodArgs(metadata: any) {\n        const args: any[] = [];\n        for (const resolver of this.methodArgsResolverProvider.provide()) {\n            await resolver.resolve(metadata, args);\n        }\n        return args;\n    }\n\n    protected async resolveResponse(metadata: any) {\n        for (const resolver of this.responseResolverProvider.provide()) {\n            await resolver.resolve(metadata);\n        }\n    }\n\n    async handle(): Promise<void> {\n        const ctx = Context.getCurrent();\n        const path = ctx.request.path;\n        const routeMetadata = await this.routeMetadataMatcher.match();\n        if (routeMetadata) {\n            await this.doHandle(routeMetadata);\n        } else {\n            throw new NotFoundAndContinueError(`No mapping found: ${ctx.request.method} ${path}`);\n        }\n    }\n\n    protected async doHandle(metadata: any, err?: any): Promise<void> {\n        let args = await this.resolveMethodArgs(metadata);\n        if (err) {\n            args = [err, ...args];\n        }\n        const methodMetadata = metadata.methodMetadata;\n        const target = methodMetadata.target;\n        let model: any;\n        try {\n            await this.pipeManager.apply({ target, method: methodMetadata.key }, args);\n            model = await target[methodMetadata.key](...args);\n        } catch (error) {\n            if (!err) {\n                const errorMetadata = await this.getErrorMetadata(error);\n                if (!errorMetadata.viewMetadata.viewName) {\n                    errorMetadata.viewMetadata.viewName = metadata.viewMetadata.viewName;\n                }\n                await this.doHandle(errorMetadata, error);\n            } else {\n                throw error;\n            }\n        }\n        if (model) {\n            await this.viewResolver.resolve(metadata, model);\n        }\n        await this.resolveResponse(metadata);\n    }\n\n    protected async getErrorMetadata(error: Error) {\n        const routeMetadata = await this.routeMetadataMatcher.match(error);\n        if (routeMetadata) {\n            return routeMetadata;\n        }\n        throw error;\n    }\n\n    async canHandle(): Promise<boolean> {\n        return this.requestMatcher.match(await this.pathResolver.resolve(this.mvcPath));\n    }\n}\n","import { StrOrRegex, ParamMetadata, BodyMetadata, QueryMetadata, RequestHeaderMetadata,\n    ResponseHeaderMetadata, RequestCookieMetadata, ResponseCookieMetadata, RequestSessionMetadata,\n    ResponseSessionMetadata, ViewMetadata, MethodMetadata, CatchMetadata, ControllerMetadata } from '../annotation';\nimport { ErrorType } from '@malagu/core';\n\nexport const MVC_HANDLER_ADAPTER_PRIORITY = 2000;\n\nexport const RouteProvider = Symbol('RouteProvider');\nexport const RouteMetadataMatcher = Symbol('RouteMetadataMatcher');\n\nexport interface Route {\n    mapping: Map<string, Map<StrOrRegex, RouteMetadata>>;\n    errorMapping: Map<ErrorType, RouteMetadata>;\n}\n\nexport interface RouteMetadata {\n    controllerMetadata: ControllerMetadata;\n    methodMetadata: MethodMetadata | CatchMetadata;\n    paramMetadata?: ParamMetadata[];\n    bodyMetadata?: BodyMetadata[];\n    queryMetadata?: QueryMetadata[];\n    requestHeaderMetadata?: RequestHeaderMetadata[];\n    responseHeaderMetadata?: ResponseHeaderMetadata[];\n    requestCookieMetadata?: RequestCookieMetadata[];\n    responseCookieMetadata?: ResponseCookieMetadata[];\n    requestSessionMetadata?: RequestSessionMetadata[];\n    responseSessionMetadata?: ResponseSessionMetadata[];\n    viewMetadata: ViewMetadata;\n}\n\nexport interface RouteProvider {\n    provide(): Promise<Route>;\n}\n\nexport interface RouteMetadataMatcher {\n    match(error?: Error): Promise<RouteMetadata | undefined>;\n}\n","export * from './handler-adapter';\nexport * from './handler-protocol';\nexport * from './route-builder';\nexport * from './route-provider';\nexport * from './route-metadata-matcher';\n","import { CONTROLLER, ControllerMetadata } from '../annotation/controller';\nimport { METADATA_KEY } from '../constants';\nimport { StrOrRegex, MethodMetadata } from '../annotation/method';\nimport { getOwnMetadata, Component, Autowired, Optional, ErrorType } from '@malagu/core';\nimport { PathResolver } from '@malagu/web';\nimport { CatchMetadata } from '../annotation';\nimport { RouteMetadata } from './handler-protocol';\nimport { getTargetClass } from '@malagu/core/lib/common/utils/proxy-util';\n\n@Component()\nexport class RouteBuilder {\n\n    @Autowired(CONTROLLER) @Optional\n    protected readonly controllers: any[] = [];\n\n    @Autowired(PathResolver)\n    protected readonly pathResolver: PathResolver;\n\n    async build() {\n        const mapping: Map<string, Map<StrOrRegex, RouteMetadata>> = new Map<string, Map<StrOrRegex, any>>();\n        const errorMapping: Map<ErrorType, any> = new Map<ErrorType, RouteMetadata>();\n\n        for (const controller of this.controllers) {\n            const targetConstructor = getTargetClass(controller);\n\n            const controllerMetadata = <ControllerMetadata>Reflect.getOwnMetadata(METADATA_KEY.controller, targetConstructor);\n            await this.doBuildRouteMap(mapping, targetConstructor, controller, controllerMetadata);\n            await this.doBuildErrorRouteMap(errorMapping, targetConstructor, controller, controllerMetadata);\n\n        }\n        return {\n            mapping,\n            errorMapping\n        };\n    }\n\n    protected async doBuildRouteMap(mapping: Map<string, Map<StrOrRegex, RouteMetadata>>, targetConstructor: any, controller: any, controllerMetadata: ControllerMetadata) {\n\n        const methodMetadata: MethodMetadata[] = getOwnMetadata(\n            METADATA_KEY.controllerMethod,\n            targetConstructor\n        );\n        for (const metadata of methodMetadata) {\n            const routeOptions: any = (typeof metadata.options === 'string' || metadata.options instanceof RegExp) ? { path: metadata.options } : metadata.options;\n            const m = { ...metadata };\n            const method = m.method;\n            m.target = controller;\n            let pathMap = mapping.get(method);\n            if (!pathMap) {\n                pathMap = new Map<StrOrRegex, RouteMetadata>();\n                mapping.set(method, pathMap);\n            }\n            let path: StrOrRegex = routeOptions.path;\n            if (typeof path === 'string' ) {\n                path = await this.pathResolver.resolve(controllerMetadata.path, path);\n            } else if (path instanceof RegExp) {\n                if (controllerMetadata.path) {\n                    path = new RegExp(await this.pathResolver.resolve(controllerMetadata.path, path.source));\n                }\n            }\n            pathMap.set(path, {\n                controllerMetadata,\n                methodMetadata: m,\n                ...this.doRouteMetadata(targetConstructor, m.key)\n            });\n        }\n    }\n\n    protected async doBuildErrorRouteMap(errorMapping: Map<ErrorType, RouteMetadata>, targetConstructor: any, controller: any, controllerMetadata: ControllerMetadata) {\n        const methodMetadata: CatchMetadata[] = getOwnMetadata(\n            METADATA_KEY.controllerCatch,\n            targetConstructor\n        );\n        for (const metadata of methodMetadata) {\n            const m = { ...metadata };\n            m.target = controller;\n            for (const errorType of metadata.errorTypes) {\n                errorMapping.set(errorType, {\n                    controllerMetadata,\n                    methodMetadata: m,\n                    ...this.doRouteMetadata(targetConstructor, m.key)\n                });\n            }\n        }\n    }\n\n    protected doRouteMetadata(targetConstructor: any, method: string) {\n        return {\n            paramMetadata: getOwnMetadata(METADATA_KEY.controllerParam, targetConstructor, method),\n            bodyMetadata: getOwnMetadata(METADATA_KEY.controllerBody, targetConstructor, method),\n            queryMetadata: getOwnMetadata(METADATA_KEY.controllerQuery, targetConstructor, method),\n            requestHeaderMetadata: getOwnMetadata(METADATA_KEY.controllerRequestHeader, targetConstructor, method),\n            responseHeaderMetadata: getOwnMetadata(METADATA_KEY.controllerResponseHeader, targetConstructor, method),\n            requestCookieMetadata: getOwnMetadata(METADATA_KEY.controllerRequestCookie, targetConstructor, method),\n            responseCookieMetadata: getOwnMetadata(METADATA_KEY.controllerResponseCookie, targetConstructor, method),\n            requestSessionMetadata: getOwnMetadata(METADATA_KEY.controllerRequestSession, targetConstructor, method),\n            responseSessionMetadata: getOwnMetadata(METADATA_KEY.controllerResponseSession, targetConstructor, method),\n            viewMetadata: getOwnMetadata(METADATA_KEY.controllerView, targetConstructor, method) || { }\n        };\n    }\n}\n","import { Component, Autowired } from '@malagu/core';\nimport { RouteProvider, RouteMetadata, RouteMetadataMatcher } from './handler-protocol';\nimport { Context, RequestMatcher } from '@malagu/web/lib/node';\n\nexport const PATH_PARMAS_ATTR = 'pathParams';\n\n@Component(RouteMetadataMatcher)\nexport class RouteMetadataMatcherImpl implements RouteMetadataMatcher {\n\n    @Autowired(RouteProvider)\n    protected readonly routeProvider: RouteProvider;\n\n    @Autowired(RequestMatcher)\n    protected readonly requestMatcher: RequestMatcher;\n\n    async match(error?: Error): Promise<RouteMetadata | undefined> {\n        const route = await this.routeProvider.provide();\n        if (error) {\n            const metadata = route.errorMapping.get(error.constructor);\n            if (metadata) {\n                return metadata;\n            } else {\n                for (const entry of route.errorMapping) {\n                    if (error instanceof <any>entry[0]) {\n                        return entry[1];\n                    }\n                }\n            }\n        } else {\n            const request = Context.getRequest();\n            const pathMap = route.mapping.get(request.method!.toLowerCase());\n            if (pathMap) {\n                for (const entry of pathMap) {\n                    const [ p, metadata ] = entry;\n                    const pathParams = await this.requestMatcher.match(p);\n                    if (pathParams) {\n                        Context.setAttr(PATH_PARMAS_ATTR, pathParams);\n                        return metadata;\n                    }\n                }\n            }\n        }\n    }\n\n}\n","import { Component, Autowired, Deferred } from '@malagu/core';\nimport { Route, RouteProvider } from './handler-protocol';\nimport { RouteBuilder } from './route-builder';\nimport { postConstruct } from 'inversify';\n\n@Component(RouteProvider)\nexport class RouteProviderImpl implements RouteProvider {\n\n    protected route: Route;\n\n    protected routeDefered = new Deferred<Route>();\n\n    @Autowired(RouteBuilder)\n    protected readonly routeBuilder: RouteBuilder;\n\n    @postConstruct()\n    protected async init() {\n        this.route = await this.routeBuilder.build();\n        this.routeDefered.resolve(this.route);\n    }\n\n    provide(): Promise<Route> {\n        return this.routeDefered.promise;\n    }\n\n}\n","export * from './annotation';\nexport * from './handler';\nexport * from './resolver';\nexport * from './view';\n","import 'reflect-metadata';\nimport { autoBind } from '@malagu/core';\nimport '.';\n\nexport default autoBind();\n","export * from './response-resolver';\nexport * from './method-args-resolver';\nexport * from './method-args-resolver-provider';\nexport * from './resolver-protocol';\nexport * from './response-resolver-provider';\nexport * from './view-resolver';\nexport * from './view-resolver-provider';\n","import { Component, Autowired, Prioritizeable } from '@malagu/core';\nimport { MethodArgsResolver } from './resolver-protocol';\n\n@Component()\nexport class MethodArgsResolverProvider {\n\n    protected prioritized: MethodArgsResolver[];\n\n    constructor(\n        @Autowired(MethodArgsResolver)\n        protected readonly methodArgsResolvers: MethodArgsResolver[]\n    ) { }\n\n    provide(): MethodArgsResolver[] {\n        if (!this.prioritized) {\n            this.prioritized = Prioritizeable.prioritizeAllSync(this.methodArgsResolvers).map(c => c.value);\n        }\n        return this.prioritized;\n    }\n\n}\n","import { MethodArgsResolver } from './resolver-protocol';\nimport { Context } from '@malagu/web/lib/node';\nimport { Component } from '@malagu/core';\nimport { BodyMetadata, RequestHeaderMetadata, ParamMetadata, QueryMetadata, RequestCookieMetadata, RequestSessionMetadata } from '../annotation';\nimport { PATH_PARMAS_ATTR } from '../handler';\n\n@Component(MethodArgsResolver)\nexport class BodyMethodArgsResolver implements MethodArgsResolver {\n    readonly priority = 100;\n    async resolve(metadata: any, args: any[]): Promise<void> {\n        const body: any = Context.getCurrent().request.body;\n        const bodyMetadatas = <BodyMetadata[]>metadata.bodyMetadata;\n        if (bodyMetadatas && body !== undefined) {\n            for (const m of bodyMetadatas) {\n                args[m.parameterIndex] = m.name ? body[m.name] : body;\n            }\n        }\n    }\n}\n\n@Component(MethodArgsResolver)\nexport class HeaderMethodArgsResolver implements MethodArgsResolver {\n    readonly priority = 200;\n    async resolve(metadata: any, args: any[]): Promise<void> {\n        const headers: any = Context.getCurrent().request.headers;\n        const headerMetadatas = <RequestHeaderMetadata[]>metadata.requestHeaderMetadata;\n        if (headerMetadatas && headers !== undefined) {\n            for (const m of headerMetadatas) {\n                args[m.parameterIndex] = m.name ? headers[m.name] : headers;\n            }\n        }\n    }\n}\n\n@Component(MethodArgsResolver)\nexport class ParamMethodArgsResolver implements MethodArgsResolver {\n    readonly priority = 300;\n\n    async resolve(metadata: any, args: any[]): Promise<void> {\n        const params: any = Context.getAttr(PATH_PARMAS_ATTR);\n        const paramMetadatas = <ParamMetadata[]>metadata.paramMetadata;\n        if (paramMetadatas && params) {\n            for (const m of paramMetadatas) {\n                args[m.parameterIndex] = m.name ? params[m.name] : params;\n            }\n        }\n    }\n}\n\n@Component(MethodArgsResolver)\nexport class QueryMethodArgsResolver implements MethodArgsResolver {\n    readonly priority = 400;\n    async resolve(metadata: any, args: any[]): Promise<void> {\n        const query: any = Context.getCurrent().request.query;\n        const queryMetadatas = <QueryMetadata[]>metadata.queryMetadata;\n        if (queryMetadatas && query !== undefined) {\n            for (const m of queryMetadatas) {\n                args[m.parameterIndex] = m.name ? query[m.name] : query;\n            }\n        }\n    }\n}\n\n@Component(MethodArgsResolver)\nexport class CookieMethodArgsResolver implements MethodArgsResolver {\n    readonly priority = 500;\n    async resolve(metadata: any, args: any[]): Promise<void> {\n        const cookies = Context.getCookies();\n        const cookieMetadatas = <RequestCookieMetadata[]>metadata.requestCookieMetadata;\n        if (cookieMetadatas && cookies !== undefined) {\n            for (const m of cookieMetadatas) {\n                args[m.parameterIndex] = m.name ? cookies.get(m.name) : cookies;\n            }\n        }\n    }\n}\n\n@Component(MethodArgsResolver)\nexport class SessionMethodArgsResolver implements MethodArgsResolver {\n    readonly priority = 600;\n    async resolve(metadata: any, args: any[]): Promise<void> {\n        const session = Context.getSession();\n        const sessionMetadatas = <RequestSessionMetadata[]>metadata.requestSessionMetadata;\n        if (sessionMetadatas && session !== undefined) {\n            for (const m of sessionMetadatas) {\n                args[m.parameterIndex] = m.name ? session[m.name] : session;\n            }\n        }\n    }\n}\n","\nexport const MethodArgsResolver = Symbol('MethodArgsResolver');\nexport const ResponseResolver = Symbol('ResponseResolver');\nexport const ViewResolver = Symbol('ViewResolver');\n\nexport interface MethodArgsResolver {\n    readonly priority: number;\n    resolve(metadata: any, args: any[]): Promise<void>;\n}\n\nexport interface ResponseResolver {\n    readonly priority: number;\n    resolve(metadata: any): Promise<void>;\n}\n\nexport interface ViewResolver {\n    resolve(metadata: any, model: any): Promise<void>;\n}\n","import { Component, Autowired, Prioritizeable } from '@malagu/core';\nimport { ResponseResolver } from './resolver-protocol';\n\n@Component()\nexport class ResponseResolverProvider {\n\n    protected prioritized: ResponseResolver[];\n\n    constructor(\n        @Autowired(ResponseResolver)\n        protected readonly responseResolvers: ResponseResolver[]\n    ) { }\n\n    provide(): ResponseResolver[] {\n        if (!this.prioritized) {\n            this.prioritized = Prioritizeable.prioritizeAllSync(this.responseResolvers).map(c => c.value);\n        }\n        return this.prioritized;\n    }\n\n}\n","import { ResponseResolver } from './resolver-protocol';\nimport { Context } from '@malagu/web/lib/node';\nimport { Component } from '@malagu/core';\nimport { ResponseHeaderMetadata, ResponseCookieMetadata, ResponseSessionMetadata } from '../annotation';\n\n@Component(ResponseResolver)\nexport class HeaderResponseResolver implements ResponseResolver {\n    readonly priority = 500;\n    async resolve(metadata: any): Promise<void> {\n        const response = Context.getCurrent().response;\n        const headerMetadatas = <ResponseHeaderMetadata[]>metadata.responseHeaderMetadata;\n        if (headerMetadatas) {\n            for (const m of headerMetadatas) {\n                response.setHeader(m.name, m.value);\n            }\n        }\n    }\n}\n\n@Component(ResponseResolver)\nexport class CookieResponseResolver implements ResponseResolver {\n    readonly priority = 500;\n    async resolve(metadata: any): Promise<void> {\n        const cookies = Context.getCookies();\n        const cookieMetadatas = <ResponseCookieMetadata[]>metadata.responseCookieMetadata;\n        if (cookieMetadatas && cookies) {\n            for (const m of cookieMetadatas) {\n                cookies.set(m.name, m.value);\n            }\n        }\n    }\n}\n\n@Component(ResponseResolver)\nexport class SessionResponseResolver implements ResponseResolver {\n    readonly priority = 500;\n    async resolve(metadata: any): Promise<void> {\n        const session = Context.getSession();\n        const sessionMetadatas = <ResponseSessionMetadata[]>metadata.responseSessionMetadata;\n        if (sessionMetadatas && session) {\n            for (const m of sessionMetadatas) {\n                session[m.name] = m.value;\n            }\n        }\n    }\n}\n","import { Component, Autowired, Prioritizeable } from '@malagu/core';\nimport { ViewResolver } from './resolver-protocol';\n\n@Component()\nexport class ViewResolverProvider {\n\n    protected prioritized: ViewResolver[];\n\n    constructor(\n        @Autowired(ViewResolver)\n        protected readonly viewResolvers: ViewResolver[]\n    ) { }\n\n    provide(): ViewResolver[] {\n        if (!this.prioritized) {\n            this.prioritized = Prioritizeable.prioritizeAllSync(this.viewResolvers).map(c => c.value);\n        }\n        return this.prioritized;\n    }\n\n}\n","import { ViewResolver } from './resolver-protocol';\nimport { Component, Autowired, Value } from '@malagu/core';\nimport { ViewProvider } from '../view/view-provider';\nimport { ViewMetadata } from '../annotation/view';\nimport { Context } from '@malagu/web/lib/node';\n\n@Component(ViewResolver)\nexport class ViewResolverImpl implements ViewResolver {\n\n    @Value('malagu.mvc.defaultViewName')\n    protected readonly defaultViewName: string;\n\n    @Autowired\n    protected readonly viewProvider: ViewProvider;\n\n    async resolve(metadata: any, model: any): Promise<void> {\n        const viewMetadata = <ViewMetadata>metadata.viewMetadata;\n        const viewName = viewMetadata.viewName || this.defaultViewName;\n        for (const view of this.viewProvider.provide()) {\n            if (await view.support(viewName)) {\n                Context.getResponse().setHeader('Content-type', view.contentType);\n                await view.render(model, viewName);\n                return;\n            }\n        }\n        throw new Error('Not found a suitable view.');\n    }\n}\n","import { Component, Value } from '@malagu/core';\nimport { View } from './view-protocol';\nimport { Context } from '@malagu/web/lib/node';\nimport { render, parse } from 'mustache';\nimport { join } from 'path';\nimport { readFileSync } from 'fs-extra';\n\n@Component(View)\nexport class HtmlView implements View {\n\n    readonly contentType = 'text/html';\n\n    readonly priority = 500;\n\n    @Value('malagu.mustache')\n    protected readonly options: any;\n\n    async render(model: any, viewName: string): Promise<void> {\n        const response = Context.getCurrent().response;\n        const { baseViewDir, cache } = this.options;\n        const template = readFileSync(join(__dirname, baseViewDir, viewName), { encoding: 'utf8' });\n        if (cache) {\n            parse(template);\n        }\n        response.body = render(template, model);\n    }\n\n    support(viewName: string): Promise<boolean> {\n        return Promise.resolve(viewName.endsWith('.mustache'));\n    }\n}\n","export * from './json-view';\nexport * from './text-view';\nexport * from './view-provider';\nexport * from './html-view';\n","import { Component } from '@malagu/core';\nimport { View } from './view-protocol';\nimport { Context } from '@malagu/web/lib/node';\n\n@Component(View)\nexport class JsonView implements View {\n\n    static VIEW_NAME = 'json';\n\n    readonly contentType = 'application/json';\n\n    readonly priority = 500;\n\n    async render(model: any, viewName: string): Promise<void> {\n        const response = Context.getCurrent().response;\n        response.body = JSON.stringify(model);\n    }\n\n    support(viewName: string): Promise<boolean> {\n        return Promise.resolve(viewName === JsonView.VIEW_NAME);\n    }\n}\n","import { Component } from '@malagu/core';\nimport { View } from './view-protocol';\nimport { Context } from '@malagu/web/lib/node';\n\n@Component(View)\nexport class TextView implements View {\n\n    static VIEW_NAME = 'text';\n\n    readonly contentType = 'text/plain';\n\n    readonly priority = 600;\n\n    async render(model: any, viewName: string): Promise<void> {\n        const response = Context.getCurrent().response;\n        response.body = model;\n    }\n\n    support(viewName: string): Promise<boolean> {\n        return Promise.resolve(viewName === TextView.VIEW_NAME);\n    }\n}\n","export const View = Symbol('View');\n\nexport interface View {\n    readonly contentType: string;\n    render(model: any, viewName: string): Promise<void>;\n    support(viewName: string): Promise<boolean>;\n}\n","import { Component, Autowired, Prioritizeable } from '@malagu/core';\nimport { View } from './view-protocol';\n\n@Component()\nexport class ViewProvider {\n\n    protected prioritized: View[];\n\n    constructor(\n        @Autowired(View)\n        protected readonly views: View[]\n    ) { }\n\n    provide(): View[] {\n        if (!this.prioritized) {\n            this.prioritized = Prioritizeable.prioritizeAllSync(this.views).map(c => c.value);\n        }\n        return this.prioritized;\n    }\n\n}\n","\nexport const ENDPOINT = 'malagu.server.endpoint';\nexport const SERVER_PATH = 'malagu.server.path';\nexport const CORS = 'malagu.web.cors';\n","export * from './resolver';\nexport * from './constants';\n","export * from './resolver-protocol';\nexport * from './path-resolver';\n","import { PathResolver } from './resolver-protocol';\nimport { Value, Component } from '@malagu/core';\nimport urlJoin = require('url-join');\n\n@Component(PathResolver)\nexport class PathResolverImpl implements PathResolver {\n\n    @Value('malagu.server.path')\n    protected readonly serverPath: string;\n\n    async resolve(...parts: string[]): Promise<string> {\n        return urlJoin(this.serverPath, ...parts);\n    }\n}\n","export const PathResolver = Symbol('PathResolver');\n\nexport interface PathResolver {\n    resolve(...parts: string[]): Promise<string>;\n}\n","import * as requestContext from 'express-http-context';\nimport { Session } from './session/session-protocol';\nimport { Cookies } from './cookies';\nimport { Request, Response } from './http/http-protocol';\n\n// eslint-disable-next-line no-shadow\nexport enum AttributeScope { App, Request, Session }\n\nexport const CURRENT_CONTEXT_REQUEST_KEY = 'CurrentContextRequest';\nexport const CURRENT_COOKIES_REQUEST_KEY = 'CurrentCookiesRequest';\nexport const CURRENT_SESSION_REQUEST_KEY = 'CurrentSessionRequest';\nexport const CURRENT_TRACE_ID_REQUEST_KEY = 'CurrentTraceIdRequest';\n\nconst appAttrs = new Map<string, any>();\n\nexport interface Context {\n\n    [key: string]: any;\n\n    readonly request: Request;\n\n    readonly response: Response;\n\n}\n\nexport namespace Context {\n\n    export function run(fn: (...args: any[]) => void) {\n        requestContext.ns.run(fn);\n    }\n\n    export function setCurrent(context: Context) {\n        requestContext.set(CURRENT_CONTEXT_REQUEST_KEY, context);\n    }\n\n    export function getCurrent<T extends Context>(): T {\n        return requestContext.get(CURRENT_CONTEXT_REQUEST_KEY);\n    }\n\n    export function getRequest(): Request {\n        return getCurrent().request;\n    }\n\n    export function getResponse(): Response {\n        return getCurrent().response;\n    }\n\n    export function getCookies(): Cookies {\n        return requestContext.get(CURRENT_COOKIES_REQUEST_KEY);\n    }\n\n    export function setCookies(cookies: Cookies): void {\n        requestContext.set(CURRENT_COOKIES_REQUEST_KEY, cookies);\n    }\n\n    export function getSession(): Session {\n        return requestContext.get(CURRENT_SESSION_REQUEST_KEY);\n    }\n\n    export function setSession(session: Session): void {\n        requestContext.set(CURRENT_SESSION_REQUEST_KEY, session);\n    }\n\n    export function setTraceId(traceId: string): void {\n        requestContext.set(CURRENT_TRACE_ID_REQUEST_KEY, traceId);\n    }\n\n    export function getTraceId(): string {\n        return requestContext.get(CURRENT_TRACE_ID_REQUEST_KEY);\n    }\n\n    export function setAttr(key: string, value: any, scope: AttributeScope = AttributeScope.Request) {\n        if (scope === AttributeScope.Request) {\n            requestContext.set(key, value);\n        } else if (scope === AttributeScope.Session) {\n            getSession()[key] = value;\n        } else {\n            appAttrs.set(key, value);\n        }\n    }\n\n    export function getAttr<T>(key: string, scope?: AttributeScope): T {\n        if (scope) {\n            if (scope === AttributeScope.Request) {\n                return requestContext.get(key);\n            } else if (scope === AttributeScope.Session) {\n                return getSession()[key];\n            } else {\n                return appAttrs.get(key);\n            }\n        } else {\n            let value = requestContext.get(key);\n            value = value ? value : getSession()[key];\n            return value ? value : appAttrs.get(key);\n        }\n    }\n\n}\n\nexport class HttpContext implements Context {\n    [key: string]: any;\n\n    constructor(public request: Request, public response: Response) {\n    }\n}\n","import { Context } from '../context';\nimport { Component, Value } from '@malagu/core';\nimport * as _Cookies from 'cookies';\nimport { Cookies } from './cookies-protocol';\n\n@Component()\nexport class CookiesFactory {\n\n    @Value('malagu.cookies.keys')\n    protected keys?: string[];\n\n    @Value('malagu.cookies.secure')\n    protected secure?: boolean;\n\n    async create(): Promise<Cookies> {\n        const cookies = new _Cookies(Context.getRequest() as any, Context.getResponse() as any, {\n            keys: this.keys,\n            secure: this.secure\n        });\n        return <Cookies>cookies;\n    }\n}\n","import { Middleware } from '../middleware';\nimport { Context } from '../context';\nimport { Component, Autowired } from '@malagu/core';\nimport * as _Cookies from 'cookies';\nimport { CookiesFactory } from './cookies-factory';\nimport { COOKIES_MIDDLEWARE_PRIORITY } from './cookies-protocol';\n\n@Component(Middleware)\nexport class CookiesMiddleware implements Middleware {\n\n    @Autowired(CookiesFactory)\n    protected readonly cookiesFactory: CookiesFactory;\n\n    async handle(ctx: Context, next: () => Promise<void>): Promise<void> {\n        if (ctx.request) {\n            Context.setCookies(await this.cookiesFactory.create());\n        }\n        await next();\n    }\n\n    readonly priority = COOKIES_MIDDLEWARE_PRIORITY;\n\n}\n","import { HTTP_MIDDLEWARE_PRIORITY } from '../http';\n\nexport const COOKIES_MIDDLEWARE_PRIORITY = HTTP_MIDDLEWARE_PRIORITY - 100;\n\nexport const Cookies = Symbol('Cookies');\n\nexport interface Cookies {\n    get(name: string, opt?: any): string | undefined;\n    set(name: string, vaule: string, opt?: any): void;\n}\n","export * from './cookies-protocol';\nexport * from './cookies-middleware';\nexport * from './cookies-factory';\n","import { Middleware } from '../middleware';\nimport { Context } from '../context';\nimport { Component, Value } from '@malagu/core';\nimport * as cors from 'cors';\nimport { CORS } from '../../common';\nimport { CORS_MIDDLEWARE_PRIORITY } from './cors-protocol';\n\n@Component(Middleware)\nexport class CorsMiddleware implements Middleware {\n\n    @Value(CORS)\n    protected readonly options: any;\n\n    async handle(ctx: Context, next: () => Promise<void>): Promise<void> {\n        return new Promise((resolve, reject) => cors(this.options)(ctx.request as any, ctx.response as any, () => next().then(resolve).catch(reject)));\n    }\n\n    readonly priority = CORS_MIDDLEWARE_PRIORITY;\n\n}\n","import { TRACE_MIDDLEWARE_PRIORITY } from '../trace';\nexport const CORS_MIDDLEWARE_PRIORITY = TRACE_MIDDLEWARE_PRIORITY - 100;\n","export * from './cors-protocol';\nexport * from './cors-middleware';\n","import { Context } from '../context';\n\nexport const Dispatcher = Symbol('Dispatcher');\n\nexport interface Dispatcher<T extends Context> {\n    dispatch(ctx: T): Promise<void>;\n}\n","import { Context } from '../context';\nimport { MiddlewareProvider } from '../middleware';\nimport { ErrorHandlerProvider } from '../error/error-hander-provider';\nimport { Dispatcher } from './dispatcher-protocol';\nimport { Component, Autowired } from '@malagu/core';\nimport { HandlerExecutionChain } from '../handler/handler-protocol';\n\n@Component(Dispatcher)\nexport class DispatcherImpl implements Dispatcher<Context> {\n\n    @Autowired(HandlerExecutionChain)\n    protected handlerExecutionChain: HandlerExecutionChain;\n\n    @Autowired\n    protected middlewareProvider: MiddlewareProvider;\n\n    @Autowired\n    protected errorHandlerProvider: ErrorHandlerProvider;\n\n    async dispatch(ctx: Context): Promise<void> {\n        try {\n            Context.setCurrent(ctx);\n            const middlewares = this.middlewareProvider.provide();\n            await this.handlerExecutionChain.execute(middlewares);\n        } catch (err) {\n            await this.handleError(ctx, err);\n        }\n    }\n\n    protected async handleError(ctx: Context, err: Error): Promise<void> {\n        const errorHandlers = this.errorHandlerProvider.provide();\n        for (const handler of errorHandlers) {\n            if (await handler.canHandle(ctx, err)) {\n                try {\n                    await handler.handle(ctx, err);\n                } catch (error) {\n                    continue;\n                }\n                return;\n            }\n        }\n    }\n}\n","export * from './dispatcher';\nexport * from './dispatcher-protocol';\n","import { Context } from '../context';\nimport { Component, Autowired, Prioritizeable, ValidationErrors } from '@malagu/core';\nimport { injectable } from 'inversify';\nimport { ErrorHandler, DEFALUT_ERROR_HANDlER_PRIORITY, HTTP_ERROR_HANDlER_PRIORITY, VALIDATION_ERRORS_ERROR_HANDlER_PRIORITY } from './error-protocol';\nimport { HttpError } from './http-error';\nimport { HttpStatus } from '../http';\n\n@injectable()\nexport abstract class AbstractErrorHandler implements ErrorHandler {\n    readonly priority: number = DEFALUT_ERROR_HANDlER_PRIORITY;\n\n    canHandle(ctx: Context, err: Error): Promise<boolean> {\n        return Promise.resolve(true);\n    }\n\n    async handle(ctx: Context, err: Error): Promise<void> {\n        console.error(err);\n        ctx.response.statusCode = 500;\n        ctx.response.end(err.message);\n        await this.doHandle(ctx, err);\n    }\n\n    doHandle(ctx: Context, err: Error): Promise<void> {\n        return Promise.resolve();\n    }\n}\n\n@Component(ErrorHandler)\nexport class DefaultErrorHandler extends AbstractErrorHandler {\n}\n\n@Component(ErrorHandler)\nexport class HttpErrorHandler implements ErrorHandler {\n    readonly priority: number = HTTP_ERROR_HANDlER_PRIORITY;\n\n    canHandle(ctx: Context, err: Error): Promise<boolean> {\n        return Promise.resolve(err instanceof HttpError);\n    }\n\n    async handle(ctx: Context, err: HttpError): Promise<void> {\n        ctx.response.statusCode = err.statusCode;\n        ctx.response.end(err.message);\n    }\n}\n\n@Component(ErrorHandler)\nexport class ValidationErrorsHandler implements ErrorHandler {\n    readonly priority: number = VALIDATION_ERRORS_ERROR_HANDlER_PRIORITY;\n\n    canHandle(ctx: Context, err: Error): Promise<boolean> {\n        return Promise.resolve(err instanceof ValidationErrors);\n    }\n\n    async handle(ctx: Context, err: HttpError): Promise<void> {\n        ctx.response.statusCode = HttpStatus.BAD_REQUEST;\n        ctx.response.end(err.message);\n    }\n}\n\n@Component()\nexport class ErrorHandlerProvider {\n\n    protected prioritized: ErrorHandler[];\n\n    constructor(\n        @Autowired(ErrorHandler)\n        protected readonly handlers: ErrorHandler[]\n    ) { }\n\n    provide(): ErrorHandler[] {\n        if (!this.prioritized) {\n            this.prioritized = Prioritizeable.prioritizeAllSync(this.handlers).map(c => c.value);\n        }\n        return this.prioritized;\n    }\n\n}\n","import { Context } from '../context';\n\nexport const ErrorHandler = Symbol('ErrorHandler');\n\nexport const DEFALUT_ERROR_HANDlER_PRIORITY = 500;\nexport const HTTP_ERROR_HANDlER_PRIORITY = DEFALUT_ERROR_HANDlER_PRIORITY + 100;\nexport const VALIDATION_ERRORS_ERROR_HANDlER_PRIORITY = HTTP_ERROR_HANDlER_PRIORITY + 100;\n\nexport interface ErrorHandler {\n    readonly priority: number;\n    canHandle(ctx: Context, err: Error): Promise<boolean>;\n    handle(ctx: Context, err: Error): Promise<void>;\n}\n","import { CustomError } from '@malagu/core';\n\nexport class HttpError extends CustomError {\n\n    constructor(public statusCode: number, message?: string) {\n        super(message);\n    }\n\n}\n","export * from './http-error';\nexport * from './error-hander-provider';\nexport * from './error-protocol';\nexport * from './not-found-error';\n","import { HttpError } from './http-error';\nimport { HttpStatus } from '../http';\n\nexport class NotFoundError extends HttpError {\n\n    constructor(message?: string) {\n        super(HttpStatus.NOT_FOUND, message);\n    }\n\n}\n\nexport class NotFoundAndContinueError extends NotFoundError {\n\n}\n","import { compose, Middleware } from '../middleware';\nimport { Component, Autowired } from '@malagu/core';\nimport { Context } from '../context';\nimport { HandlerExecutionChain, HandlerMapping } from './handler-protocol';\n\n@Component(HandlerExecutionChain)\nexport class HandlerExecutionChainImpl implements HandlerExecutionChain {\n\n    @Autowired(HandlerMapping)\n    protected readonly handlerMapping: HandlerMapping;\n\n    execute(middlewares: Middleware[]): Promise<void> {\n        const middleware = compose(middlewares);\n        return middleware(Context.getCurrent(), {\n            handle: (c: Context, next: () => Promise<void>) => this.handlerMapping.handle(),\n            priority: 0\n        });\n    }\n\n}\n","import { Autowired, Component, Prioritizeable } from '@malagu/core';\nimport { HandlerMapping, HandlerAdapter } from './handler-protocol';\nimport { NotFoundError } from '../error';\nimport { NotFoundAndContinueError } from '../error';\n\n@Component(HandlerMapping)\nexport class HandlerMappingImpl implements HandlerMapping {\n\n    protected prioritized: HandlerAdapter[];\n\n    constructor(\n        @Autowired(HandlerAdapter)\n        protected readonly handlerAdapters: HandlerAdapter[]\n    ) {\n        this.prioritized = Prioritizeable.prioritizeAllSync(this.handlerAdapters).map(c => c.value);\n    }\n\n    async handle(): Promise<void> {\n        let lastError;\n        for (const handler of this.prioritized) {\n            if (await handler.canHandle()) {\n                try {\n                    await handler.handle();\n                    return;\n                } catch (error) {\n                    if (error instanceof NotFoundAndContinueError) {\n                        lastError = error;\n                    } else {\n                        throw error;\n                    }\n                }\n            }\n        }\n        if (lastError) {\n            throw lastError;\n        }\n        throw new NotFoundError('Not found a suitable handler adapter');\n    }\n\n}\n","import { Middleware } from '../middleware';\n\nexport const HandlerExecutionChain = Symbol('HandlerExecutionChain');\n\nexport const HandlerAdapter = Symbol('HandlerAdapter');\n\nexport const HandlerMapping = Symbol('HandlerMapping');\n\nexport interface HandlerExecutionChain {\n    execute(middlewares: Middleware[]): Promise<void>;\n}\n\nexport interface HandlerAdapter {\n    readonly priority: number;\n    handle(): Promise<void>;\n    canHandle(): Promise<boolean>;\n}\n\nexport interface HandlerMapping {\n    handle(): Promise<void>;\n}\n","export * from './handler-execution-chain';\nexport * from './handler-mapping';\nexport * from './handler-protocol';\n","import { Middleware } from '../middleware';\nimport { Context } from '../context';\nimport { Component, Deferred } from '@malagu/core';\nimport { HTTP_MIDDLEWARE_PRIORITY } from './http-protocol';\n\n@Component(Middleware)\nexport class HttpMiddleware implements Middleware {\n\n    async handle(ctx: Context, next: () => Promise<void>): Promise<void> {\n        await next();\n        const response = ctx.response;\n        if (!response.finished) {\n            const body = response.body;\n            if (body instanceof Deferred) {\n                response.end(await body.promise);\n            } else {\n                response.end(response.body);\n            }\n        }\n    }\n\n    readonly priority = HTTP_MIDDLEWARE_PRIORITY;\n\n}\n","import * as http from 'http';\nimport * as net from 'net';\nimport { CORS_MIDDLEWARE_PRIORITY } from '../cors';\n\nexport const HTTP_MIDDLEWARE_PRIORITY = CORS_MIDDLEWARE_PRIORITY - 100;\n\nexport const XML_HTTP_REQUEST = 'XMLHttpRequest';\nexport const X_REQUESTED_WITH = 'X-Requested-With';\n\nexport interface Request {\n    method: string;\n    headers: http.IncomingHttpHeaders;\n    body: any;\n    url: string;\n    path: string;\n    query: { [key: string]: string };\n    connection: net.Socket;\n}\n\nexport interface Response {\n    statusCode: number;\n    setHeader(name: string, value: number | string | string[]): void;\n    getHeader(name: string): number | string | string[] | undefined;\n    getHeaders(): http.OutgoingHttpHeaders;\n    end(chunk: any, encoding?: string, cb?: Function): void;\n    finished: boolean;\n    body?: any;\n}\n\nexport enum HttpStatus {\n    CONTINUE = 100,\n    SWITCHING_PROTOCOLS = 101,\n    PROCESSING = 102,\n    OK = 200,\n    CREATED = 201,\n    ACCEPTED = 202,\n    NON_AUTHORITATIVE_INFORMATION = 203,\n    NO_CONTENT = 204,\n    RESET_CONTENT = 205,\n    PARTIAL_CONTENT = 206,\n    AMBIGUOUS = 300,\n    MOVED_PERMANENTLY = 301,\n    FOUND = 302,\n    SEE_OTHER = 303,\n    NOT_MODIFIED = 304,\n    TEMPORARY_REDIRECT = 307,\n    PERMANENT_REDIRECT = 308,\n    BAD_REQUEST = 400,\n    UNAUTHORIZED = 401,\n    PAYMENT_REQUIRED = 402,\n    FORBIDDEN = 403,\n    NOT_FOUND = 404,\n    METHOD_NOT_ALLOWED = 405,\n    NOT_ACCEPTABLE = 406,\n    PROXY_AUTHENTICATION_REQUIRED = 407,\n    REQUEST_TIMEOUT = 408,\n    CONFLICT = 409,\n    GONE = 410,\n    LENGTH_REQUIRED = 411,\n    PRECONDITION_FAILED = 412,\n    PAYLOAD_TOO_LARGE = 413,\n    URI_TOO_LONG = 414,\n    UNSUPPORTED_MEDIA_TYPE = 415,\n    REQUESTED_RANGE_NOT_SATISFIABLE = 416,\n    EXPECTATION_FAILED = 417,\n    I_AM_A_TEAPOT = 418,\n    UNPROCESSABLE_ENTITY = 422,\n    FAILED_DEPENDENCY = 424,\n    TOO_MANY_REQUESTS = 429,\n    INTERNAL_SERVER_ERROR = 500,\n    NOT_IMPLEMENTED = 501,\n    BAD_GATEWAY = 502,\n    SERVICE_UNAVAILABLE = 503,\n    GATEWAY_TIMEOUT = 504,\n    HTTP_VERSION_NOT_SUPPORTED = 505,\n}\n","export * from './http-protocol';\nexport * from './http-middleware';\n","export * from './middleware';\nexport * from './middleware';\nexport * from './dispatcher';\nexport * from './context';\nexport * from './error';\nexport * from './handler';\nexport * from './cookies';\nexport * from './session';\nexport * from './http';\nexport * from './matcher';\nexport * from './cors';\nexport * from './trace';\n","export * from './matcher-protocol';\nexport * from './request-matcher';\n","export const RequestMatcher = Symbol('RequestMatcher');\n\nexport interface RequestMatcher {\n    match(pattern: any, method?: string): Promise<any>;\n}\n","import { RequestMatcher } from './matcher-protocol';\nimport { Context } from '../context';\nimport { Component } from '@malagu/core';\nimport * as UrlPattern from 'url-pattern';\n\n@Component(RequestMatcher)\nexport class RequestMatcherImpl implements RequestMatcher {\n    protected caches: Map<string, UrlPattern> = new Map<string, UrlPattern>();\n\n    async match(pattern: any, method?: string): Promise<any> {\n        const request = Context.getRequest();\n        const path = request.path;\n        if (method && request.method && method.toLowerCase() !== request.method.toLowerCase()) {\n            return false;\n        }\n        pattern = pattern || '/';\n        let urlPathern: UrlPattern | undefined;\n        if (typeof pattern === 'string') {\n            urlPathern = this.caches.get(pattern);\n            if (!urlPathern) {\n                urlPathern = new UrlPattern(pattern);\n                this.caches.set(pattern, urlPathern);\n            }\n        } else {\n            urlPathern = new UrlPattern(pattern);\n        }\n        return urlPathern.match(path);\n    }\n\n}\n","import { Context } from '../context';\nimport { Middleware } from './middleware-provider';\n\nexport function compose(middlewares: Middleware[]) {\n    return (ctx: Context, next: Middleware) => {\n        let index = -1;\n        const dispatch = (i: number): Promise<void> => {\n            if (i <= index) {\n                return Promise.reject(new Error('next() called multiple times'));\n            }\n            index = i;\n            let middleware = middlewares[i];\n            if (i === middlewares.length) {\n                middleware = next;\n            }\n            if (!middleware) {\n                return Promise.resolve();\n            }\n            try {\n                return middleware.handle(ctx, (): Promise<void> => dispatch(i + 1));\n            } catch (err) {\n                return Promise.reject(err);\n            }\n        };\n        return dispatch(0);\n    };\n}\n","export * from './middleware-provider';\nexport * from './compose';\n","import { Context } from '../context';\nimport { Component, Autowired, Optional, Prioritizeable } from '@malagu/core';\n\nexport const Middleware = Symbol('Middleware');\n\nexport interface Middleware {\n\n    handle(ctx: Context, next: () => Promise<void>): Promise<void>;\n\n    readonly priority: number;\n}\n\n@Component()\nexport class MiddlewareProvider {\n\n    protected prioritized: Middleware[];\n\n    constructor(\n        @Autowired(Middleware) @Optional\n        protected readonly middlewares: Middleware[]\n    ) { }\n\n    provide(): Middleware[] {\n        if (!this.prioritized) {\n            this.prioritized = Prioritizeable.prioritizeAllSync(this.middlewares).map(c => c.value);\n        }\n        return this.prioritized;\n    }\n\n}\n","import 'reflect-metadata';\nimport 'reflect-metadata';\nimport { autoBind } from '@malagu/core';\nimport '../common';\nimport '.';\n\nexport default autoBind();\n","export * from './session-manager';\nexport * from './session';\nexport * from './session-store';\nexport * from './session-strategy';\nexport * from './session-middleware';\n","import { SessionManager, Session, SessionStrategy, SessionStore, COOKIE_EXP_DATE } from './session-protocol';\nimport { Autowired, Value, Component } from '@malagu/core';\nimport { Context } from '../context';\n\n@Component(SessionManager)\nexport class SessionManagerImpl implements SessionManager {\n\n    @Value('malagu.session.sessionIdKey')\n    protected readonly sessionIdKey: string;\n\n    @Autowired(SessionStrategy)\n    protected readonly sessionStrategy: SessionStrategy;\n\n    @Autowired(SessionStore)\n    protected readonly sessionStore: SessionStore;\n\n    protected async getSessionId() {\n        const cookies = Context.getCookies();\n        return cookies.get(this.sessionIdKey);\n    }\n\n    async get(): Promise<Session> {\n        if (Context.getSession()) {\n            return Context.getSession();\n        }\n        const sessionId = await this.getSessionId();\n        if (sessionId) {\n            const session = await this.sessionStore.get(sessionId);\n            if (session && await this.sessionStrategy.valid(session)) {\n                return session;\n            }\n        }\n        return this.sessionStrategy.create();\n    }\n\n    async remove(): Promise<void> {\n        if (Context.getSession()) {\n            await this.sessionStore.remove(Context.getSession().id);\n        }\n        Context.getCookies().set(this.sessionIdKey, '', {\n            expires: COOKIE_EXP_DATE,\n            maxAge: false,\n        });\n    }\n\n    async commit(): Promise<void> {\n        const session = Context.getSession();\n        if (!session) {\n            return;\n        }\n        if (await this.sessionStrategy.shouldSaveSession(session)) {\n            await this.sessionStore.set(session);\n            Context.getCookies().set(this.sessionIdKey, session.id);\n        }\n    }\n\n}\n","import { Middleware } from '../middleware';\nimport { Context } from '../context';\nimport { Component, Value, Autowired } from '@malagu/core';\nimport { SessionManager, SESSION_MIDDLEWARE_PRIORITY } from './session-protocol';\n\n@Component(Middleware)\nexport class SessionMiddleware implements Middleware {\n\n    @Autowired(SessionManager)\n    protected readonly sessionManager: SessionManager;\n\n    @Value('malagu.session')\n    protected readonly sessionOptions: any;\n\n    async handle(ctx: Context, next: () => Promise<void>): Promise<void> {\n        Context.setSession(await this.sessionManager.get());\n        try {\n            await next();\n        } finally {\n            if (this.sessionOptions.autoCommit) {\n                await this.sessionManager.commit();\n            }\n        }\n    }\n\n    readonly priority = SESSION_MIDDLEWARE_PRIORITY;\n\n}\n","import { COOKIES_MIDDLEWARE_PRIORITY } from '../cookies';\n\nexport const Session = Symbol('Session');\nexport const SessionStore = Symbol('SessionStore');\nexport const SessionManager = Symbol('SessionManager');\nexport const SessionStrategy = Symbol('SessionStrategy');\n\nexport const COOKIE_EXP_DATE = new Date('Thu, 01 Jan 1970 00:00:00 GMT');\n\nexport const SESSION_MIDDLEWARE_PRIORITY = COOKIES_MIDDLEWARE_PRIORITY - 100;\n\nexport interface Session {\n    id: string;\n    isNew: boolean;\n    expire: number;\n    maxAge: number;\n    readonly changed: boolean;\n    [key: string]: any;\n    toJSON(): any;\n\n}\n\nexport interface SessionStore {\n    get(id: string): Promise<Session | undefined>;\n    set(session: Session): Promise<void>;\n    remove(id: string): Promise<void>;\n}\n\nexport interface SessionManager {\n\n    get(): Promise<Session>;\n    remove(): Promise<void>;\n    commit(): Promise<void>;\n}\n\nexport interface SessionStrategy {\n    valid(session: Session): Promise<boolean>;\n    create(obj?: any): Promise<Session>;\n    shouldSaveSession(session: Session): Promise<boolean>;\n}\n","import { Session, SessionStrategy, SessionStore, COOKIE_EXP_DATE } from './session-protocol';\nimport { Autowired, Value, Component } from '@malagu/core';\nimport { Context } from '../context';\n\n@Component(SessionStore)\nexport class CookieSessionStore implements SessionStore {\n\n    protected session: Session | undefined;\n\n    @Value('malagu.session')\n    protected readonly sessionOptions: any;\n\n    @Autowired(SessionStrategy)\n    protected readonly sessionStrategy: SessionStrategy;\n\n    async get(id: string): Promise<Session | undefined> {\n        const value = Context.getCookies().get(this.sessionOptions.sessionKey, this.sessionOptions);\n        if (value) {\n            return this.sessionStrategy.create(JSON.parse(Buffer.from(value, 'base64').toString('utf8')));\n        }\n    }\n\n    async set(session: Session): Promise<void> {\n        Context.getCookies().set(this.sessionOptions.sessionKey, Buffer.from(JSON.stringify(session.toJSON())).toString('base64'), this.sessionOptions);\n    }\n\n    async remove(id: string): Promise<void> {\n        Context.getCookies().set(this.sessionOptions.sessionKey, '', {\n            expires: COOKIE_EXP_DATE,\n            maxAge: false,\n        });\n    }\n\n}\n","import { SessionStrategy, Session } from './session-protocol';\nimport { SessionImpl } from './session';\nimport { Value, Component } from '@malagu/core';\n\n@Component(SessionStrategy)\nexport class SessionStrategyImpl implements SessionStrategy {\n\n    @Value('malagu.session')\n    protected readonly sessionOptions: any;\n\n    async valid(session: Session): Promise<boolean> {\n        if (session.expire && session.expire < Date.now()) {\n            return false;\n        }\n        return true;\n    }\n\n    create(obj?: any): Promise<Session> {\n        return Promise.resolve(new SessionImpl(this.sessionOptions, obj));\n    }\n\n    async shouldSaveSession(session: Session): Promise<boolean> {\n        if (session.changed) {\n            return true;\n        }\n        // save if opts.renew and session will expired\n        if (this.sessionOptions.renew === true) {\n            const expire = session.expire;\n            const maxAge = session.maxAge;\n            // renew when session will expired in maxAge / 2\n            if (expire && maxAge && expire - Date.now() < maxAge / 2) {\n                return true;\n            }\n        }\n        return false;\n    }\n}\n","import { Session } from './session-protocol';\nimport * as uuid from 'uuid/v4';\nconst crc = require('crc').crc32;\n\nexport class SessionImpl implements Session {\n    readonly id = uuid();\n    isNew: boolean = true;\n    expire: number;\n    maxAge: number;\n    protected _preHash: string;\n    constructor(sessionOptions: any, obj?: any) {\n        if (obj) {\n            this.isNew = false;\n            for (const key of Object.keys(obj)) {\n                (this as any)[key] = obj[key];\n            }\n        } else {\n            this.expire = sessionOptions.maxAge + Date.now();\n            this.maxAge = sessionOptions.maxAge;\n        }\n        this._preHash = this.hash();\n    }\n\n    protected hash() {\n        return crc(JSON.stringify(this.toJSON()));\n    }\n\n    toJSON(): any {\n        const obj: any = {};\n        for (const key of Object.keys(this)) {\n            if (key !== 'isNew' && key[0] !== '_') {\n                obj[key] = (this as any)[key];\n            }\n        }\n        return obj;\n    }\n\n    get changed() {\n        if (this._preHash !== this.hash()) {\n            return true;\n        }\n        return false;\n    }\n\n}\n","export * from './trace-middleware';\nexport * from './trace-protocol';\nexport * from './trace-id-resolver';\n","import { v4 } from 'uuid';\nimport { Component, Value } from '@malagu/core';\nimport { TraceIdResolver, TRACE_ID_REQUEST_FIELD } from './trace-protocol';\nimport { Context } from '../context';\n\n@Component(TraceIdResolver)\nexport class TraceIdResolverImpl implements TraceIdResolver {\n    @Value(TRACE_ID_REQUEST_FIELD)\n    protected readonly traceField: string;\n\n    resolve(): Promise<string> {\n        if (Context.getRequest() && this.traceField ) {\n            const traceId = Context.getRequest().headers[this.traceField] as string | undefined;\n            if (traceId) {\n                return Promise.resolve(traceId);\n            }\n        }\n        return Promise.resolve(v4());\n    }\n}\n","import { TraceIdResolver } from './trace-protocol';\nimport { Middleware } from '../middleware';\nimport { Context } from '../context';\nimport { Component, Autowired, Logger } from '@malagu/core';\nimport { TRACE_MIDDLEWARE_PRIORITY, TRACE_ID_RESPONSE_FIELD } from './trace-protocol';\n\n@Component(Middleware)\nexport class TraceMiddleware implements Middleware {\n\n    @Autowired(TraceIdResolver)\n    protected readonly traceIdResolver: TraceIdResolver;\n\n    @Autowired(Logger)\n    protected readonly logger: Logger;\n\n    async handle(ctx: Context, next: () => Promise<void>): Promise<void> {\n        const method = ctx.request.method;\n        const path = ctx.request.path;\n        const traceId = await this.traceIdResolver.resolve();\n        this.logger.info(`starting ${method} ${path} with traceId[${traceId}]`);\n        const now = Date.now();\n\n        Context.setTraceId(traceId);\n        ctx.response.setHeader(TRACE_ID_RESPONSE_FIELD, traceId);\n        try {\n            await next();\n        } finally {\n            this.logger.info(`ending ${method} ${path} with traceId[${traceId}], cost ${Date.now() - now}ms`);\n        }\n    }\n\n    readonly priority = TRACE_MIDDLEWARE_PRIORITY;\n\n}\n","// Be sure this middleware is always at first position\nexport const TRACE_MIDDLEWARE_PRIORITY = 2200;\n\nexport const TRACE_ID_REQUEST_FIELD = 'malagu.trace.requestField';\nexport const TRACE_ID_RESPONSE_FIELD = 'malagu.trace.responseField';\n\nexport const TraceIdResolver = Symbol('TraceIdResolver');\n\nexport interface TraceIdResolver {\n    resolve(): Promise<string>;\n}\n","import { Controller, Get, View, TextView } from '@malagu/mvc/lib/node';\n\n@Controller()\nexport class HomeController {\n    \n    @Get()\n    @View(TextView.VIEW_NAME)\n    home(): string {\n        return 'Welcome to Malagu';\n    }\n}\n","import './user-controller';\nimport './home-controller';\nimport { autoBind } from '@malagu/core';\nexport default autoBind();\n","import { Controller, Get, Param, Delete, Put, Post, Body } from '@malagu/mvc/lib/node';\n\nexport interface User {\n    name: string;\n    age: number;\n}\n\nconst users = [ { name: 'Tom', age: 20 }, { name: 'Alice', age: 23 }]\n\n@Controller('users')\nexport class UserController {\n    \n    @Get()\n    list(): User[] {\n        return users;\n    }\n\n    @Get(':name')\n    get(@Param('name') name: string): User | undefined {\n        for (const user of users) {\n            if (user.name === name) {\n                return user;\n            }\n        }\n    }\n\n    @Delete(':name')\n    reomve(@Param('name') name: string): void {\n        const index = users.findIndex(user => user.name === name);\n        if (index !== -1) {\n            users.splice(index, 1);\n        }\n    }\n\n    @Put()\n    modify(@Body() user: User): void {\n        const target = users.find(u => u.name == user.name);\n        if (target) { \n            target.age = user.age;\n        }\n    }\n\n    @Post()\n    create(@Body() user: User): void {\n        users.push(user);\n    }\n\n}\n","module.exports = require(\"class-transformer\");","module.exports = require(\"class-validator\");","module.exports = require(\"cookies\");","module.exports = require(\"cors\");","module.exports = require(\"crc\");","module.exports = require(\"express-http-context\");","module.exports = require(\"fs-extra\");","module.exports = require(\"inversify\");","module.exports = require(\"inversify-binding-decorators\");","module.exports = require(\"jexl\");","module.exports = require(\"loglevel\");","module.exports = require(\"mustache\");","module.exports = require(\"path\");","module.exports = require(\"raw-body\");","module.exports = require(\"reflect-metadata\");","module.exports = require(\"source-map-support\");","module.exports = require(\"ts-custom-error\");","module.exports = require(\"url-join\");","module.exports = require(\"url-pattern\");","module.exports = require(\"util\");","module.exports = require(\"uuid\");","module.exports = require(\"uuid/v4\");","module.exports = require(\"vscode-jsonrpc\");","module.exports = require(\"vscode-jsonrpc/lib/events\");"],"sourceRoot":""}